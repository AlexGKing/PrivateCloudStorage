(function(){function e(e){return r(this,e,1),this.lazyRender||this.render(),this}function t(e){return r(this,e,1),this.lazyRender||this.render(),this}function n(e){return r(this,e,1),this.lazyRender||this.render(),this}var r=QW.ObjectH.mix,i=QW.ArrayH.remove,s=QW.StringH.format,o=QW.Browser.ie6,u=QW.DomU,a=u.createElement,f=u.getDocRect,l=QW.NodeH,c=QW.EventTargetH.addEventListener,h=QW.EventTargetH.removeEventListener,p=l.fire,d=l.hide,v=l.setStyle,m=l.getXY,g=function(e,t,n,r,i){var s=u.getDocRect();r==null&&(r=(s.width-t)/2+s.scrollX),r=Math.max(Math.min(r,s.scrollX+s.width-t),s.scrollX),i==null&&(i=(s.height-n)/2+s.scrollY),i=Math.max(Math.min(i,s.scrollY+s.height-n),s.scrollY),l.setXY(e,r,i)},y=l.contains,b=l.removeNode,w=QW.EventH,E=w.getTarget,S=w.getKeyCode,x=w.preventDefault,T=QW.CustEvent,N={VERSION:"0.0.1"};(function(){function e(){var e=a("div",{className:"mask",tabIndex:-1,unselectable:"on"});return document.body.insertBefore(e,document.body.firstChild),e}function t(){var e=l.offsetParent,t=document.documentElement,n=l.style;if(parseInt(n.top)!=e.scrollTop||parseInt(n.left)!=e.scrollLeft)n.top=e.scrollTop,n.left=e.scrollLeft;t.clientHeight!=l.offsetHeight&&(n.height=t.clientHeight),t.clientWidth!=l.offsetWidth&&(n.width=t.clientWidth)}function n(e){e.keyEsc&&(h(document,"keydown",N.keydownHdl),c(document,"keydown",N.keydownHdl))}var s=100,u=[],l,p=0;r(N,{showPanel:function(r,a,c,h,d,y){r._rendered&&r.render(),i(u,r),u.push(r);var b=r.oWrap.style;r.isVisible?b.zIndex!=s&&(b.zIndex=s+=2):b.zIndex=s+=2,r.withMask&&(l=l||e(),v(l,{zIndex:s-1,display:"block"}),o&&(t(l),clearInterval(p),p=setInterval(t,1e3))),h!=null&&(b.width=h+"px"),d!=null&&(b.height=d+"px");if(r.posCenter){var w=N.getWrapSize(r);g(r.oWrap,w[0],w[1],a,c)}else{a=a||0,c=c||0;if(y){var E=m(y);a+=E[0],c+=E[1]}if(r.posAdjust){var w=N.getWrapSize(r),S=f();a=Math.min(a,S.scrollX+S.width-w[0]),a=Math.max(a,S.scrollX),c=Math.min(c,S.scrollY+S.height-w[1]),c=Math.max(c,S.scrollY)}b.left=a+"px",b.top=c+"px"}b.display="block",r.isVisible=!0,n(r)},hidePanel:function(e){d(e.oWrap),e.isVisible=!1,i(u,e);var t=!1;for(var n=u.length-1;n>-1;n--){var r=u[n];if(r.withMask){l.style.zIndex=r.oWrap.style.zIndex-1,t=!0;break}}!t&&l&&(d(l),clearInterval(p))},disposePanel:function(e){b(e.oWrap);for(var t in e)e[t]=null},risePanel:function(e){if(!e.isVisible)throw alert("\u7a0b\u5e8f\u9519\u8bef."),"\u9519\u8bef\uff1a\u8fd8\u6ca1\u6709\u6253\u5f00panel\u5462.";var t=e.oWrap.style;if(t.zIndex!=s){t.zIndex=s+=2,i(u,e),u.push(e);if(e.withMask){var n=l.style;n.zIndex=s-1}}},keydownHdl:function(e){if(u.length&&S(e)==27){var t=u[u.length-1];t.keyEsc&&(t.hide(),x(e))}u.length||h(document,"keydown",N.keydownHdl)},getWrapSize:function(e,t,n){var r=e.oWrap,i=r.style,s=[i.display,i.width,i.height];i.display="block",t&&(i.width=t),n&&(i.height=n);var o=[r.offsetWidth,r.offsetHeight];return i.display=s[0],s[1]&&(i.width=s[1]),s[2]&&(i.height=s[2]),o}})})(),function(){function t(e,t){t=t||"",t.tagName?(e.innerHTML="",e.appendChild(t)):e.innerHTML=t}e.EVENTS=["beforeshow","aftershow","beforehide","afterhide"],e._elHtml={content:'<div class="panel-content" remark="oContent"><div class="hd"></div><div class="bd"></div><div class="ft"></div></div>',closeHdl:'<span class="close"></span>',resizeHdl:'<span class="resize"><span></span></span>',corner1:'<span class="co1"><span></span></span>',corner2:'<span class="co2"><span></span></span>',cue:'<span class="cue"></span>',shadow:'<span class="sd"></span>'},e.prototype={defaultClassName:"panel",wrapId:"",className:"",title:"",header:"",body:"Panel Body",footer:"",withCorner:0,withCue:0,withShadow:0,withClose:0,withMask:0,dragable:0,resizable:0,keyEsc:0,posCenter:0,posAdjust:0,isVisible:!1,oWrap:null,oContent:null,oHeader:null,oBody:null,oFooter:null,oCloseHdl:null,oResizeHdl:null,oShadow:null,oCue:null,oCorner1:null,oCorner2:null,render:function(){var n=this;if(n._rendered)return;var r=a("div",{className:n.defaultClassName+" "+(n.className||"")});r.style.display="none",n.oWrap=r,n.wrapId&&(r.id=n.wrapId),d(r);var i=e._elHtml,s=[i.content,n.withClose?i.closeHdl:"",n.resizable?i.resizeHdl:"",n.withCorner?i.corner1+i.corner2:"",n.withCue?i.cue:"",n.withShadow?i.shadow:""];r.innerHTML=s.join("");var o=r.childNodes;n.oContent=o[0];var u=1;n.withClose&&(n.oCloseHdl=o[u++]),n.resizable&&(n.oResizeHdl=o[u++]),n.withCorner&&(n.oCorner1=o[u++],n.oCorner2=o[u++]),n.withCue&&(n.oCue=o[u++]),n.withShadow&&(n.oShadow=o[u++]);var o=n.oContent.childNodes;n.oHeader=o[0],n.oBody=o[1],n.oFooter=o[2],n.isVisible=!1;var f=n.title&&"<h3>"+n.title+"</h3>"||n.header;f&&t(n.oHeader,f),n.body&&t(n.oBody,n.body),n.footer&&t(n.oFooter,n.footer),n.withClose&&c(n.oCloseHdl,"click",function(){n.hide()}),n.dragable&&n.initDrag(),n.resizable&&n.initResize(),document.body.insertBefore(r,document.body.firstChild),T.createEvents(n,e.EVENTS),n._rendered=!0},show:function(e,t,n,r,i){return this._rendered&&this.render(),this.fire("beforeshow")==0?!1:(N.showPanel(this,e,t,n,r,i),this.fire("aftershow"),!0)},hide:function(){return this.fire("beforehide")==0?!1:(N.hidePanel(this),this.fire("afterhide"),!0)},dispose:function(){if(this.isVisible)return!1;N.disposePanel(this)},rise:function(){N.risePanel(this)},initDrag:function(){var e=this,t=new QW.SimpleDrag({oSrc:this.oWrap,oHdl:this.oHeader,minXAttr:1,minYAttr:1,maxXAttr:this.maxXAttr,maxYAttr:this.maxYAttr,withProxy:!0});t.on("dragstart",function(){e.rise()})},initResize:function(){var e=this,t=new QW.SimpleResize({oSrc:this.oWrap,oHdl:this.oResizeHdl,minXAttr:150,yFixed:!0,withProxy:!0});t.on("dragstart",function(){e.rise()})}}}(),function(){t.MENTOR_CLASS=e,t.prototype={posAdjust:1,defaultClassName:"panel panel-popup",relatedEls:null,_refreshBlurHdl:function(e){this._fnBlur&&(h(document,"keydown",this._fnBlur),h(document,"keyup",this._fnBlur),h(document,"mousedown",this._fnBlur),e&&(c(document,"keydown",this._fnBlur),c(document,"keyup",this._fnBlur),c(document,"mousedown",this._fnBlur)))},show:function(e,t,n,r,i){var s=this;return s._rendered&&s.render(),s._fnBlur=s._fnBlur||function(e){var t=E(e)||document.body;if(!s.oWrap)return;var n=s.relatedEls||[];n.push(s.oWrap);for(var r=0;r<n.length;r++){var i=n[r];if(i==t||y(i,t))return}s.hide()},s.fire("beforeshow")==0?!1:(N.showPanel(s,e,t,n,r,i),s._refreshBlurHdl(!0),s.fire("aftershow"),!0)},hide:function(){return this.fire("beforehide")==0?!1:(N.hidePanel(this),this._refreshBlurHdl(!1),this.fire("afterhide"),!0)}},r(t.prototype,e.prototype)}(),function(){n.MENTOR_CLASS=e,n.prototype={defaultClassName:"panel panel-dialog",withMask:1,withClose:1,dragable:!!QW.SimpleDrag},r(n.prototype,e.prototype)}();var C=function(){var e={alert:'<div class="panel-dialog-sys panel-alert cls"><div class="msg">{0}</div><div class="btn-ctn"><button>\u786e\u5b9a</button></div></div>',confirm:'<div class="panel-dialog-sys panel-confirm cls"><div class="msg">{0}</div><div class="btn-ctn"><button>\u786e\u5b9a</button><button>\u53d6\u6d88</button></div></div>',prompt:'<div class="panel-dialog-sys panel-prompt cls"><div class="msg">{0}</div><div class="ipt-ctn"><input type="text-input"></div><div class="btn-ctn"><button>\u786e\u5b9a</button><button>\u53d6\u6d88</button></div></div>',msgbox:'<div class="panel-dialog-sys panel-msgbox cls"><div class="msg">{0}</div><div class="btn-ctn"><button>\u662f(Yes)</button><button>\u5426(No)</button><button>\u53d6\u6d88</button></div></div>'},t={getSysDialog:function(t,i,o,u){u=u||{},r(u,{posCenter:1,keyEsc:1,title:"\u7cfb\u7edf\u63d0\u793a",dragable:!!QW.SimpleDrag,body:s(e[t]||"error",i)});var a=new n(u),f=a.oWrap.getElementsByTagName("button");a.dialogButtons=f;switch(t){case"alert":c(f[0],"click",function(e){a.hide()});break;case"confirm":c(f[0],"click",function(e){a.returnValue=!0,a.hide()}),c(f[1],"click",function(e){a.hide()}),a.returnValue=!1;break;case"prompt":var l=a.oWrap.getElementsByTagName("input")[0];a.dialogInput=l,c(l,"keydown",function(e){S(e)==w.KEY_ENTER&&setTimeout(function(){p(f[0],"click")},10)}),c(f[0],"click",function(e){a.returnValue=l.value,a.hide()}),c(f[1],"click",function(e){a.hide()});break;case"msgbox":c(f[0],"click",function(e){a.returnValue=!0,a.hide()}),c(f[1],"click",function(e){a.returnValue=!1,a.hide()}),c(f[2],"click",function(e){a.hide()})}return a.on("aftershow",function(){var e=l||f[0];try{e.focus(),e.select()}catch(t){}}),a.on("afterhide",function(){try{o&&o(this.returnValue)}finally{}}),a},_sysDialog:function(e,t,n,r,i){i=i||{};var s=QW.Panel.getSysDialog(e,t,r,i);e=="prompt"&&(s.dialogInput.value=n||""),s.show(null,null,i.width||300,i.height)},alert:function(e,t,n){QW.Panel._sysDialog("alert",e,null,t,n)},confirm:function(e,t,n){QW.Panel._sysDialog("confirm",e,null,t,n)},prompt:function(e,t,n,r){QW.Panel._sysDialog("prompt",e,t,n,r)},msgbox:function(e,t,n){QW.Panel._sysDialog("msgbox",e,null,t,n)}};return t}();QW.provide({PanelManager:N,BasePanel:e,LayerPopup:t,LayerDialog:n,Panel:C})})(),function(){function e(e){i(this,e,1),this.lazyRender||this.render()}function t(t){e.call(this,t)}function n(e){i(this,e,1),this.lazyRender||this.render()}function r(t){e.call(this,t)}var i=QW.ObjectH.mix,s=QW.FunctionH.lazyApply,o=QW.DomU,u=o.createElement,a=QW.NodeH,f=QW.EventTargetH,l=f.addEventListener,c=f.removeEventListener,h=f.delegate,p=a.ancestorNode,d=a.getCurrentStyle,v=a.setStyle,m=a.getRect,g=a.setRect,y=a.addClass,b=a.removeClass,w=a.marginWidth,E=QW.EventH,S=E.getTarget,x=E.preventDefault,T=E.getPageX,N=E.getPageY,C=QW.CustEvent,k={isDragging:!1,oDrag:null,startDate:null,startX:0,startY:0,pageX:0,pageY:0,deltaX:0,deltaY:0,deltaDeltaX:0,deltaDeltaY:0,mouseDownTarget:null,startDrag:function(e,t){}};(function(){var e=function(e){var r=k.oDrag;if(r.fire("beforedragstart")===!1)return;if(k.isDragging||!r)return;k.isDragging=!0,l(document,"mousemove",n),l(document,"mouseup",t),k.startDate=new Date,k.deltaX=k.deltaY=k.deltaDeltaX=k.deltaDeltaY=0,k.startX=k.pageX=T(e),k.startY=k.pageY=N(e),k.mouseDownTarget=S(e),x(e),r.dragstart(e)},t=function(e){var r=k.oDrag;if(!k.isDragging||!r)return;r.dragend(e),k.isDragging=!1,k.oDrag=null,c(document,"mousemove",n),c(document,"mouseup",t)},n=function(e){var t=k.oDrag;if(!k.isDragging||!t)return;var n=T(e),r=N(e);k.deltaDeltaX=n-k.pageX,k.deltaDeltaY=r-k.pageY,k.pageX=n,k.pageY=r,k.deltaX=n-k.startX,k.deltaY=r-k.startY,t.drag(e)};k.startDrag=function(t,n){if(k.isDragging)return;k.oDrag=n,e(t)}})(),function(){e.EVENTS=["dragstart","drag","dragend"];var t=function(e){return parseFloat(e)||0};e.prototype={oSrc:null,oHdl:null,oProxy:null,xAttr:"left",yAttr:"top",maxXAttr:null,minXAttr:null,maxYAttr:null,minYAttr:null,xFixed:!1,yFixed:!1,className:"proxy-dd",withProxy:!1,showProxy:!0,getProxy:function(){var e=null;return function(){var t=this.oProxy||e;return t||(t=u("div",{className:this.className}),document.body.appendChild(t),t.style.display="none"),this.oProxy=t}}(),dragstart:function(e){var n=this;n.oHdl.setCapture&&n.oHdl.setCapture(),n.startXAttr=t(d(n.oSrc,n.xAttr.replace(/^-/,""))),n.startYAttr=t(d(n.oSrc,n.yAttr.replace(/^-/,"")));if(n.withProxy){var r=n.getProxy(),i=m(n.oSrc);g(r,i.left,i.top,i.width,i.height,!1),n.startXAttrProxy=t(r.style[n.xAttr.replace(/^-/,"")]),n.startYAttrProxy=t(r.style[n.yAttr.replace(/^-/,"")]),r.__deltaX=r.__deltaY=0,s(function(){n.showProxy&&(r.style.display="block")},null,[],20,function(){return n!=k.oDrag||r.style.display!="none"?-1:k.deltaX*k.deltaX+k.deltaY*k.deltaY>4||new Date-k.startDate>500?1:0})}n.fire("dragstart")},drag:function(e){var t=this,n={X:1,Y:1};for(var r in n){var i=r.toLowerCase();if(!t[i+"Fixed"]){var s=(t[i+"Attr"].indexOf("-")==0?-1:1)*k["delta"+r];t["max"+r+"Attr"]!=null&&(s=Math.min(s,t["max"+r+"Attr"]-t["start"+r+"Attr"])),t["min"+r+"Attr"]!=null&&(s=Math.max(s,t["min"+r+"Attr"]-t["start"+r+"Attr"]));if(t.withProxy){try{v(t.oProxy,t[i+"Attr"],t["start"+r+"AttrProxy"]+s+"px")}catch(o){}t.oProxy["__delta"+r]=s}else v(t.oSrc,t[i+"Attr"].replace(/^-/,""),t["start"+r+"Attr"]+s+"px")}}t.fire("drag")},dragend:function(e){var t=this;t.oHdl.releaseCapture&&t.oHdl.releaseCapture();if(t.withProxy){var n=t.oProxy;n.style.display="none",t.xFixed||v(t.oSrc,t.xAttr.replace(/^-/,""),t.startXAttr+n.__deltaX+"px"),t.yFixed||v(t.oSrc,t.yAttr.replace(/^-/,""),t.startYAttr+n.__deltaY+"px")}t.fire("dragend")},render:function(){var t=this;if(t._rendered)return;C.createEvents(t,e.EVENTS),t.delegateContainer?h(t.delegateContainer,t.oHdlSelector,"mousedown",function(e){t.oHdl=this,t.oSrcSelector?t.oSrc=p(this,t.oSrcSelector):t.oSrc=t.oHdl,k.startDrag(e&&e.core||e,t)}):(t.oHdl=t.oHdl||t.oSrc,l(t.oHdl,"mousedown",function(e){k.startDrag(e,t)})),t._rendered=!0}}}(),function(){t.MENTOR_CLASS=e,t.prototype={xAttr:"width",yAttr:"height",minXAttr:0,minYAttr:0},i(t.prototype,e.prototype)}(),function(){n.EVENTS=["dragstart","drag","dragend"],n.prototype={oProxy:null,oHdl:null,getProxy:function(){var e=null;return function(){var t=this.oProxy||e;return t||(t=u("div",{className:"proxy-rectselector"}),document.body.appendChild(t),t.style.display="none"),this.oProxy=t}}(),dragstart:function(e){this.oProxy=this.getProxy();var t=this;s(function(){t.oProxy.style.display="block"},null,[],10,function(){return t!=k.oDrag||t.oProxy.style.display!="none"?-1:k.deltaX*k.deltaX+k.deltaY*k.deltaY>2?1:0}),this.oHdl.setCapture&&this.oHdl.setCapture(),g(this.oProxy,k.startX,k.startY,1,1),this.fire("dragstart")},drag:function(e){g(this.oProxy,Math.min(k.startX,k.pageX),Math.min(k.startY,k.pageY),Math.abs(k.deltaX),Math.abs(k.deltaY)),this.fire("drag")},dragend:function(e){this.oHdl.releaseCapture&&this.oHdl.releaseCapture(),this.oProxy.style.display="none",this.fire("dragend")},render:function(){var e=this;if(e._rendered)return;C.createEvents(e,n.EVENTS),l(e.oHdl,"mousedown",function(t){if(e.ignoreLeftButtonDrag&&(E.getEvent(t)||{}).button&2)return;if(e.blackSelectors4Start){var n=S(t),r=[];while(n)n.tagName&&r.push(n),n=n.parentNode;if(QW.Selector.filter(r,e.blackSelectors4Start).length)return;k.startDrag(t,e)}else S(t)==e.oHdl&&k.startDrag(t,e)}),e._rendered=!0}}}(),function(){r.MENTOR_CLASS=e,r.prototype={withProxy:!0,isInline:!1,dragstart:function(t){y(this.oSrc,"dragingModule"),e.prototype.dragstart.call(this,t)},dragend:function(t){b(this.oSrc,"dragingModule"),e.prototype.dragend.call(this,t)},adjustLayout:function(e){var t=this,n=k.pageX,r=k.pageY,i=t.siblings,s=t.containers,o=t.isInline?"deltaDeltaX":"deltaDeltaY",u;if(e.type=="dragstart")t.__elAnim&&t.__elAnim.pause();else if(e.type=="drag")if(s||i){var a=!1;u=m(t.oSrc);var f=w(t.oSrc);if(n>=u.left-f[3]&&n<=u.right+f[1]&&r>=u.top-f[0]&&r<=u.bottom+f[2])return;for(var l=0;i!=null&&l<i.length;l++){var c=i[l];if(c==t.oSrc)continue;u=m(c),f=w(c);if(n>=u.left-f[3]&&n<=u.right+f[1]&&r>=u.top-f[0]&&r<=u.bottom+f[2]){k[o]>0?c.parentNode.insertBefore(t.oSrc,c.nextSibling):k[o]<0&&c.parentNode.insertBefore(t.oSrc,c),a=!0;break}}for(var l=0;!a&&s!=null&&l<s.length;l++){c=s[l],u=m(c);if(n>u.left+1&&n<u.right-1&&r>u.top+1&&r<u.bottom-1){c.lastChild!=t.oSrc&&(c.appendChild(t.oSrc),a=!0);break}}a&&t.oHdl.setCapture&&t.oHdl.setCapture()}if(e.type=="dragend"&&t.needAnim&&QW.ElAnim){u=m(t.oSrc),t.oProxy.style.display="block";var h=new QW.ElAnim(t.oProxy,{width:{to:u.width},height:{to:u.height},left:{to:u.left},top:{to:u.top}},300);h.on("end",function(){t.oProxy.style.display="none"}),h.play(),t.oProxy.__elAnim=h}},render:function(){var t=this;e.prototype.render.call(t)}},i(r.prototype,e.prototype)}(),QW.provide({DragManager:k,SimpleDrag:e,SimpleResize:t,LayoutDrag:r,RectSelector:n})}(),namespace("yunpan"),yunpan.dialog=function(){function e(e){var n={wrapId:"BasePanel"+ ++t,className:"panel-t1",title:"",header:"",body:"",footer:"",withClose:!0,withCorner:!1,withCue:!1,withShadow:!1,withBgIframe:!0,keyEsc:!0,withMask:!0,dragable:!!QW.SimpleDrag,resizable:!1,posCenter:!0,posAdjust:!1,aftershowcallback:null};Object.mix(n,e,!0);var r=new QW.BasePanel(n);n.withClose&&W(r.oWrap).query(".close").appendChild(W('<a class="close-link" href="###" onclick="return false;"><span>\u5173\u95ed</span></a>'));if(e.buttons){for(var i=0,s=e.buttons.length;i<s;i++){var o=e.buttons[i],u=o.cls?" "+o.cls:"",a=o.type?o.type=="blue"?"blue":"gray":o.text=="\u786e\u5b9a"?"blue":"gray",f=o.style?' style="'+o.style+'"':"",l=o.id?" id="+o.id:"";btnHtml=['<span class="y-btn y-btn-'+a+u+'"'+f+l+">",o.withIcon?'<i class="icon"></i>':"",o.text,"</span>"].join("");var c=W(btnHtml).insertTo("beforeend",r.oFooter);o.handler&&c.on("click",o.handler)}W(r.oFooter).css("display","")}else W(r.oFooter).addClass("ft-none");return r.on("aftershow",function(){var t=W(r.oContent),n=t.getRect();W(r.oHeader).css("width",n.width-16+"px"),W(r.oFooter).css("width",n.width-2+"px"),W('<span class="left-corner"></span><span class="right-corner"></span>').insertTo("beforeend",r.oWrap),e.aftershowcallback&&e.aftershowcallback()}),r}var t=0;return{create:e}}(),yunpan.Msg=function(){function e(){}var t=['<div class="msg-panel {$type}" style="{$style}">','<div class="msg-text-box"><div class="msg-text {$type}-tip" style="{$textstyle}">{$text}</div></div>',"</div>"].join(""),n=['<div class="msg-panel msg-prompt">','<div class="msg-text-box">','<div class="msg-text">{$text}\uff1a<input id="{$promptIpt}" value="{$defaultText}"></div>',"</div>","</div>"].join(""),r='        <div class="msg-panel msg-prompt">            <div class="msg-text-box">                <div class="msg-text">                <label for="{$promptIpt}">{$text}\uff1a</label>                <textarea id="{$promptIpt}">{$defaultText}</textarea>                </div>            </div>        </div>';return{forceAlert:function(e,n){n=ObjectH.mix({title:"\u63d0\u793a",type:"ok"},n,!0);var r=yunpan.dialog.create({body:t.tmpl({type:"msg-"+n.type,text:e}),title:n.title,withClose:!1});return r.show(),r},alert:function(e,n){n=ObjectH.mix({title:"\u64cd\u4f5c\u63d0\u793a",type:"ok"},n,!0);var r=n.dialog_after||null,i=[],s=[];n.width&&i.push("width:"+n.width+"px"),n.height&&i.push("height:"+n.height+"px"),i=i.join(";"),n.textwidth&&s.push("width:"+n.textwidth+"px;"),n.textheight&&s.push("height:"+n.textheight+"px"),s=s.join(";");var o=yunpan.dialog.create({body:t.tmpl({type:"msg-"+n.type,text:e,style:i,textstyle:s}),title:n.title,withMask:n.with_Mask===!1?!1:!0,withClose:n.with_close===!1?!1:!0,maxXAttr:n.maxXAttr,maxYAttr:n.maxYAttr,buttons:[{text:n.btnOkText||"\u786e\u5b9a",type:n.btnOKType||"blue",handler:function(){o.hide(),o.dispose(),o=null,n.fn&&n.fn("yes"),r&&(r.show(),r=null)}}]});return o.show(),W(o.oFooter).query(".y-btn").item(0).focus(),o},confirm:function(e,n){n=ObjectH.mix({title:"\u64cd\u4f5c\u63d0\u793a",type:"ok"},n,!0);var r=[],i=[];n.width&&r.push("width:"+n.width+"px"),n.height&&r.push("height:"+n.height+"px"),r=r.join(";"),n.textwidth&&i.push("width:"+n.textwidth+"px"),n.textheight&&i.push("height:"+n.textheight+"px"),i=i.join(";");var s=yunpan.dialog.create({body:t.tmpl({type:"msg-"+n.type,text:e,style:r,textstyle:i}),title:n.title,withClose:n.with_close===!1?!1:!0,maxXAttr:n.maxXAttr,maxYAttr:n.maxYAttr,withMask:n.with_Mask===!1?!1:!0,buttons:[{text:n.btnOkText||"\u786e\u5b9a",type:n.btnOKType||"blue",handler:function(){s.hide(),s.dispose(),s=null,n.fn&&n.fn("yes")}},{text:n.btnCancelText||"\u53d6\u6d88",handler:function(){s.hide(),s.dispose(),s=null,n.fn&&n.fn("no")}}]});return s.show(),W(s.oFooter).query(".y-btn").item(0).focus(),s},prompt:function(e,t){t=ObjectH.mix({title:"\u64cd\u4f5c\u63d0\u793a",type:"ok",defaultText:"",inputId:yunpan.id()},t,!0);var i=n;t.enable_textarea&&(i=r);var s=yunpan.dialog.create({body:i.tmpl({type:"msg-prompt",text:e,promptIpt:t.inputId,defaultText:t.defaultText}),title:t.title,withClose:!0,withMask:t.with_Mask===!1?!1:!0,maxXAttr:t.maxXAttr,maxYAttr:t.maxYAttr,buttons:[{text:"\u786e\u5b9a",handler:function(){t.fn&&t.fn("yes",g(t.inputId).value),s.hide()}},{text:"\u53d6\u6d88",handler:function(){t.fn&&t.fn("no",g(t.inputId).value),s.hide(),s.dispose(),s=null}}]});return s.show(),setTimeout(function(){g(t.inputId).focus()},1),W("#"+t.inputId).on("keydown",function(e){13==e.keyCode&&W(s.oFooter).query(".x-button").item(0).fire("click")}),s}}}(),function(){function e(e){e=e||{},this.path=e.path||"/",this.domain=e.domain||"",this.expires=e.expires||31536e6,this.secure=e.secure||""}e.prototype={set:function(e,t){var n=new Date;typeof this.expires=="number"&&n.setTime(n.getTime()+this.expires),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";path="+this.path+(this.domain==""?"":"; domain="+this.domain)+(this.secure?"; secure":"")},get:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""},remove:function(e){var t=this.expires;this.expires=-31536e6,this.set(e,""),this.expires=t}},e.set=function(t,n,r){(new e(r)).set(t,n)},e.get=function(t,n){return(new e(n)).get(t)},e.remove=function(t,n){(new e(n)).remove(t)},QW.provide("Cookie",e)}();var extraRegTpl=function(){var e=['<label for="ypPhrase-{$id}">\u9a8c\u8bc1\u7801</label>','<span class="verify-code"><input type="text"  maxlength="4" id="ypPhrase-{$id}" name="yp-phrase" class="ipt1" autocomplete="off" tabindex="5"></span>','<span class="yz"><img src="http://captcha.360.cn/image.php?app=ypreg&r={$random}" width="99" height="35" style="cursor: pointer;" class="new-cap"><a  class="fac ml8 new-cap" href="#nogo">\u6362\u4e00\u5f20</a>','</span><b class="icon-phrase icon-wrong">\u9a8c\u8bc1\u7801\u9519\u8bef</b>','<p class="phrase-tips"><span id="yp-tips-phrase" class="tips-phrase">\u8bf7\u8f93\u5165\u56fe\u4e2d\u7684\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199</span></p>'].join("").tmpl(),t=0;return function(){return e({id:++t,random:Math.random()})}}(),comReg=function(){function e(e){var n=SYS_CONF.isAutoActive,r=SYS_CONF.userName;r=decodeURIComponent(r).encode4Html().trim().subByte(12,"\u2026"),W(".reg-title").html("Hi\uff0c"+r+" \u60a8\u5df2\u767b\u5f55360\u5e10\u53f7"),W("#reg").hide(),n?(W("#autoPanel").show(),t()):(W("#actPanel").show(),o||(W(".phrase-box").html(extraRegTpl()),W("#actPanel input").focus(function(){W("#actPanel .verify-code").replaceClass("verify-code","verify-code-focus")}).blur(function(){W("#actPanel .verify-code-focus").replaceClass("verify-code-focus","verify-code")}),o=!0),e?W("#actPanel .icon-phrase").replaceClass("icon-info","icon-wrong").html(e).show():W("#actPanel .icon-phrase").hide(),W("#actPanel").delegate(".new-cap","click",function(){W(this).parentNode().query("img").attr("src","http://captcha.360.cn/image.php?app=ypreg&r="+Math.random())}),setTimeout(function(){W("#actPanel .verify-code input").focus()},1),W(".other-login").click(function(){Cookie.remove("Q",{domain:".360.cn"}),Cookie.remove("T",{domain:".360.cn"}),location.href="http://yunpan.360.cn"}))}function t(t){var n="/user/ajaxActive?cross_domain_callback=%callbackfun%&invite_code="+SYS_CONF.inviteCode+"&t="+Math.random();t&&(n+="&captcha="+t),loadJsonp(n,function(t){if(t.errno==0)/gxq\.360\.cn/.test(u)?loadJsonp("/user/crossdomain?cross_domain_callback=%callbackfun%&t="+Math.random(),function(){location.href=u}):location.href=u;else{var n=t.errmsg;t.errno==26020?n="\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165":t.errno==20001&&(n="\u540c\u4e00ip\u6fc0\u6d3b\u4e91\u76d8\u592a\u9891\u7e41\uff0c\u8bf7\u660e\u5929\u518d\u6765\u6fc0\u6d3b"),SYS_CONF.isAutoActive?(W("#autoPanel").show(),W(".auto-tip").html(n).addClass("auto-error-tip")):(W(".phrase-box img").attr("src","http://captcha.360.cn/image.php?app=ypreg&r="+Math.random()),e(n))}})}function n(){var e=W("#actPanel input").val();return e?t(W("#actPanel input").val()):W("#actPanel .icon-wrong").html("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801").show(),!1}function r(){W(".reg-title").html("\u6b22\u8fce\u6ce8\u518c360\u4e91\u76d8"),W("#actPanel").hide(),W("#reg").show(),QHPass.resConfig.postCharset="utf-8",QHPass.resConfig.src="pcw_cloud",QHPass.showReg(function(){var e=encodeURIComponent(W("#loginEmail").val().trim());Cookie.set("YUNPAN_USER",e,{domain:".yunpan.360.cn",expires:31536e6}),SYS_CONF.isAutoActive=!0,t()},{wrap:"reg",src:"pcw_cloud",needName:!1,needEmailActive:!1,cookie_domains:["","nc"],postCharset:"utf-8",field:["loginEmail","password","rePassword","phrase"],type:"normal",captFlag:!1})}function i(){u=location.href.queryUrl("u"),u||(u="/my?from=firstreg"),QHPass.resConfig.regOpts.tipText.reg_login_now='<a class="fac" href="'+u.encode4Html()+'">\u7acb\u5373\u767b\u5f55</a>';if(SYS_CONF.isYunpanUser)var t=yunpan.Msg.confirm('\u60a8\u5f53\u524d\u767b\u5f55\u7684360\u5e10\u53f7\u201c<span style="color:#666">'+SYS_CONF.userName.encode4Html()+"</span>\u201d\u5df2\u5f00\u901a\u4e91\u76d8\uff0c\u65e0\u987b\u6ce8\u518c\uff01",{type:"warning",btnOkText:"\u76f4\u63a5\u767b\u5f55",btnCancelText:"\u6ce8\u518c\u4e00\u4e2a\u65b0\u5e10\u53f7",fn:function(e){e=="yes"&&loadJsonp("/user/crossdomain?cross_domain_callback=%callbackfun%&t="+Math.random(),function(){location.href=u})}});SYS_CONF.isLogin360&&!SYS_CONF.isYunpanUser?e():r()}var s=!1,o=!1,u="";return{init:i,checkAct:n}}();Dom.ready(comReg.init);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-37860337-1"]),_gaq.push(["_setDomainName","360.cn"]),_gaq.push(["_setAllowLinker",!0]),_gaq.push(["_addOrganic","soso","w"]),_gaq.push(["_addOrganic","yodao","q"]),_gaq.push(["_addOrganic","sogou","query"]),_gaq.push(["_addOrganic","bing","q"]),_gaq.push(["_addOrganic","so.360.cn","q",!1]),_gaq.push(["_addOrganic","so.com","q",!1]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();