var QHPass=window.QHPass||{};(function(e,t,n){e.tpl=e.tpl||{};if(!t.QHDomain){var r=n.getElementsByTagName("script"),i=/^.*\/(\w+)\.js.*$/.exec(r[r.length-1].src);i=i?i[1]:"v3203b6",location.protocol.indexOf("https")>-1?t.QHDomain={popJsPath:"https://s0.qhimg.com/i360/;js;pass_api_/panel,login,reg,name,mail,loginemail,md5,log,mobile,delmobile/"+i+".js",i360:"https://i.360.cn",login_https:"https://login.360.cn",captcha:"https://captcha.360.cn",login_http:"https://login.360.cn"}:t.QHDomain={popJsPath:"http://s0.qhimg.com/i360/;js;pass_api_/panel,login,reg,name,mail,loginemail,md5,log,mobile,delmobile/"+i+".js",i360:"http://i.360.cn",login_https:"https://login.360.cn",captcha:"http://captcha.360.cn",login_http:"http://login.360.cn"}}var s=t.QHDomain;s.captchaUrl=location.host.indexOf("360.cn")==-1?s.i360+"/reg/doGetCap?app=":s.captcha+"/image.php?app=";var o=e.$=t.jQuery||t.qui||t.QW&&t.QW.NodeW;o.prototype.append||(o.prototype.append=o.prototype.appendChild),o.prototype.un||(o.prototype.un=o.prototype.unbind);var u="1360.com|360.cn|qihoo.com|qikoo.com|woxihuan.com|yunpan.cn|360pay.cn|360kan.com|so.com|leidian.com",a=u.split("|"),f=[],l={},c=0,h,p,d=a.length;for(;c<d;c++)h=a[c],p=h.split(".")[0],f.push(p),l[p]=h;e._hostConf=u,e._hostShort=f.join("|"),e._hostShort2long=l;var v=location.host.match(new RegExp(e._hostConf.replace(/\./,"\\."),"ig"));e._hostCurr=v&&v[0],e.uinfo={},e.resConfig={reloadAfterLogout:!0,jumpUrl:"",charset:"gbk",useType:"pop",loginStatus:!1,userInfoParas:"",postCharset:"gbk",isAutoLogin:!1,loginTitle:"",regTitle:"",setNameTitle:"",setMailTitle:"",afterRenderPanel:null,needDefaultSkin:!0,afterClosePanel:null,loginAfterSetName:!0,regType:"email_phone",isByqt:!0,thirdFun:function(e){},callback:"",regPopOnce:!0,logoutCallback:null,regCallback:function(){},loginCallback:function(){},getInfoAfterReg:!0,src:"pcw_i360",requestScema:location.protocol.replace(":","")||"http",initModule:function(){},regOpts:{regway:"email",needEmailActive:!0,needName:!0,nickname:!1},regPhoneOpts:{regway:"phone",needName:!0,nickname:!1},loginOpts:{thirdLogin:["sina|renren|msn|fetion|Telecom","","",""],captFlag:!0,validatelm:"0",custStyleUrl:""},ssoOpts:{},bindOpts:{width:400,title:"\u5b8c\u5584\u5e10\u53f7\u8d44\u6599"},namedOpts:{},mailOpts:{},bindMobileOpts:{},delBindMobileOpts:{}};var m=e.resConfig.requestScema;e.cookieEnabled=function(){var e=!0,t=n.cookie.length,r=Math.random(),i=["test",r,"test=test",";expires=Thu, 01 Jan 9970 00:00:00 GMT",";path=/"].join("");return n.cookie=i,n.cookie.length==t&&(e=!1),i=["test",r,"test=test",";expires=Thu, 01 Jan 1970 00:00:00 GMT",";path=/"].join(""),n.cookie=i,e},e.thirdLoginSuccess=function(){t.loginThirdCallback=function(){e.getUserInfo(function(t){if(t.qid)try{e.loginUtils.closeOpenHander(),e.setloginStatus(t),e.resConfig.thirdFun&&e.resConfig.thirdFun(t)}catch(n){}})};if(e._hostCurr&&e._hostCurr!=="360.cn"){var n=m+"://login."+e._hostCurr+"/?o=sso&m=setcookie&requestScema="+m+"&func=loginThirdCallback&s=",r=s.login_http+"/?o=sso&m=getRd&requestScema="+m+"&func=rdCallBack&s=";e.loadJs(r+Math.random()),t.rdCallBack=function(t){var r=t.rd;r!=""?e.loadJs(n+r+"&t="+Math.random()):loginThirdCallback()}}else loginThirdCallback()},e.getDocRect=function(e){e=e||n;var t=e.defaultView||e.parentWindow,r=navigator.userAgent.match(/opera/i),i=e.compatMode,s=e.documentElement,o=t.innerHeight||0,u=t.innerWidth||0,a=t.pageXOffset||0,f=t.pageYOffset||0,l=s.scrollWidth,c=s.scrollHeight;return i!="CSS1Compat"&&(s=e.body,l=s.scrollWidth,c=s.scrollHeight),i&&!r&&(u=s.clientWidth,o=s.clientHeight),l=Math.max(l,u),c=Math.max(c,o),a=Math.max(a,s.scrollLeft,e.body.scrollLeft),f=Math.max(f,s.scrollTop,e.body.scrollTop),{width:u,height:o,scrollWidth:l,scrollHeight:c,scrollX:a,scrollY:f}},e.logoutOtherDomain=function(t){function n(){try{e.setloginStatus({})}catch(t){}e.resConfig.passLevelCookieName&&e.Cookie.del(e.resConfig.passLevelCookieName),e.resConfig.logoutCallback&&e.resConfig.logoutCallback()}t.errno==0&&(e._hostCurr&&e._hostCurr!=="360.cn"?e.loadJsonp(m+"://login."+e._hostCurr+"/?o=sso&m=logout&requestScema="+m+"&func=%callback%",n):n())},e.logout=function(t){t&&(e.resConfig.logoutCallback=t);if(e.Cookie.get("Q"))if(e.resConfig.reloadAfterLogout){var n=e.resConfig.jumpUrl||location.href;location.href=s.login_http+"/?op=logout&requestScema="+m+"&destUrl="+encodeURIComponent(n)}else e.loadJsonp(s.login_http+"/?o=sso&m=logout&requestScema="+m+"&func=%callback%",e.logoutOtherDomain);else t&&t()},e._btn_logout_handler=function(t){try{e.logout(),e.preventDefault(t)}catch(n){}},e.setloginStatus=function(t){e.closePop&&e.closePop();try{if(t.qid){e.uinfo=t;var n=t.userName&&t.userName.indexOf("360U")==-1?t.userName:t.login_email||t.loginEmail||t.userName;o(".loginWrap").show(),o(".nloginWrap").hide(),o(".popUsername").html(n),o(".btn-logout-pop").click(e._btn_logout_handler)}else e.uinfo={},o(".loginWrap").hide(),o(".popUsername").html(""),o(".nloginWrap").show(),o(".btn-logout-pop").un("click",e._btn_logout_handler)}catch(r){}},e.mix=function(e,t,n){for(var r in t)if(n||!(r in e))e[r]=t[r];return e},e.loadJs=function(e,t,r){r=r||{};var i=n.getElementsByTagName("head")[0]||n.documentElement,s=n.createElement("script"),o=!1;s.src=e,r.charset&&(s.charset=r.charset),s.onerror=s.onload=s.onreadystatechange=function(){!o&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(o=!0,t&&t(),s.onerror=s.onload=s.onreadystatechange=null,i.removeChild(s))},i.insertBefore(s,i.firstChild)},e.loadJsonp=function(){var n=new Date*1;return function(r,i,s){s=s||{};var o="QiUserJsonP"+n++,u=s.callbackReplacer||/%callback%/ig;t[o]=function(e){i&&i(e),t[o]=null},u.test(r)?r=r.replace(u,o):r+=(/\?/.test(r)?"&":"?")+"callback="+o,e.loadJs(r,null,s)}}(),e.trim=function(e){return e&&e.replace(/^\s+|\s+$/g,"")},e.byteLen=function(e){return e.replace(/[^\x00-\xff]/g,"--").length},e.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)r in e&&t.call(n,e[r],r,e)},e.queryUrl=function(e,t){e=e.replace(/^[^?=]*\?/ig,"").split("#")[0];var n={};return e.replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,t,r,i){try{r=decodeURIComponent(r),i=decodeURIComponent(i)}catch(s){}r in n?n[r]instanceof Array?n[r].push(i):n[r]=[n[r],i]:n[r]=/\[\]$/.test(r)?[i]:i}),t?n[t]:n},e.Cookie=e.Cookie||{},e.Cookie.get=function(t){if(e.Cookie._isValidKey(t)){var r=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),i=r.exec(n.cookie);if(i)try{return decodeURIComponent(i[2])||null}catch(s){return i[2]||null}}return null},e.Cookie._isValidKey=function(e){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$')).test(e)},e.Cookie.set=function(t,r,i){if(!e.Cookie._isValidKey(t))return;i=i||{};var s=i.expires;"number"==typeof i.expires&&(s=new Date,s.setTime(s.getTime()+i.expires)),n.cookie=t+"="+encodeURIComponent(r)+"; path="+(i.path?i.path:"/")+(s?"; expires="+s.toGMTString():"")+(i.domain?"; domain="+i.domain:"")+(i.secure?"; secure":"")},e.Cookie.del=function(t){e.Cookie.set(t,"")},e.getUserStatus=function(){return!!e.uinfo.qid},e.clearUinfo=function(){e.uinfo={}},e.getUserInfo=function(t,n,r){r=r||e.resConfig.userInfoParas;if(e.Cookie.get("Q")||!e.resConfig.isByqt)if(e.getUserStatus())t&&t(e.uinfo);else{var i=r||e._hostCurr&&e._hostCurr&&m+"://login."+e._hostCurr+"/?o=sso&m=info&requestScema="+m+"&func=%callback%&show_name_flag=1"||s.login_http+"/?o=sso&m=info&requestScema="+m+"&func=%callback%&show_name_flag=1";i&&e.loadJsonp(i,function(e){e.qid?t&&t(e):n&&n()})}else n&&n(),o(".loginWrap").hide(),o(".nloginWrap").show()},e.execCallback=function(n,r){e.resConfig.loginAfterSetName=!1,typeof n=="string"?t.location.href=n:typeof n=="boolean"?t.location.reload(n):n&&n(r)},e.login=function(t,n){e.getUserInfo(function(n){e.execCallback(t,n)},function(){n=n||{},e.mix(n,e.resConfig.loginOpts||{});if(typeof n.loginType=="string")switch(n.loginType){case"quick":n.loginType=e.resConfig.loginOpts.loginType=["quick","normal"];break;case"mobile":n.loginType=e.resConfig.loginOpts.loginType=["mobile","normal"];break;default:n.loginType=e.resConfig.loginOpts.loginType=["normal"]}e.showLogin(t,n)})},e.reg=function(t,n){e.getUserInfo(function(n){e.execCallback(t,n)},function(){e.showReg(t,n)})},e.loginMail=function(t,n){var r=t;e.getUserInfo(function(t){e.showLoginEmail(r,{crumb:t.crumb})},function(){e.showLogin(function(t){e.showLoginEmail(r,{crumb:t.crumb})},n)})},e.bindMobile=function(t,n){var r=t,i=n;e.getUserInfo(function(t){e.showBindMobile(r,i)},function(){e.showLogin(function(t){e.showBindMobile(r,i)},n)})},e.delMobile=function(t,n){e.showDelBindMobile(t,n)},e.autoLogin=function(t){e.loadJsonp(s.login_https+"/?o=sso&m=info&requestScema="+m+"&func=%callback%&need_ck=1",function(n){n.auth&&n.auth.length>0&&e.autoAuth(t,n)})},e.autoAuth=function(t,n){n=n||{};var r=(new Date).getTime(),i=n.auth,s=s||{};if(!e._hostCurr)return;for(var o=0,u=i.length;o<u;o++)i[o].t&&(s.expires=i[o].t-r),s.path="/",s.domain=e._hostCurr,e.Cookie.set(i[o].k,i[o].v,s);if(e.resConfig.loginAfterSetName&&n.type!="bind"&&(!n.userName||n.userName.indexOf("360U")>-1))e.showSetName(t,{notRequest:!0,crumb:n.crumb});else if(e.resConfig.loginAfterSetName&&n.type=="bind")e.showBind(t,{regway:"bind",crumb:n.crumb});else{e.execCallback(t,n);try{e.setloginStatus(n)}catch(a){}}},e.sso=function(t,n){e.getUserInfo(function(n){e.execCallback(t,n)},function(){e.showSso(t,n)})},e.mobile=function(t,n){e.getUserInfo(function(n){e.execCallback(t,n)},function(){e.showMobileLogin(t,n)})};var g=["showSso","showLogin","showReg","showSetName","showBind","showBindMobile","showDelBindMobile","showSecMail","showLoginEmail"],y,b=0,w=g.length,E={};for(;b<w;b++)y=g[b],e[y]=E[y]=function(t){return function(n,r){e.loadJs(s.popJsPath,function(){if(E[t]==e[t])throw new Error("QUC JSAPI ["+s.popJsPath+"] loading exception. Run the [QHPass."+t+"] methods fail.");e[t](n,r),delete E[t]},{charset:e.resConfig.charset})}}(y);e.namedUser=function(t,n){e.resConfig.loginAfterSetName=!0,e.getUserInfo(function(n){n.type!="bind"&&(!n.userName||n.userName.indexOf("360U")>-1)?e.showSetName(t,{notRequest:!0,crumb:n.crumb}):n.type=="bind"?e.showBind(t,{regway:"bind",crumb:n.crumb}):e.execCallback(t,n)},function(){e.showLogin(t)})},e.secMail=function(t,n){e.getUserInfo(function(n){e.showSecMail(t,{crumb:n.crumb})},function(){e.showLogin(function(n){e.showSecMail(t,{crumb:n.crumb})},n)})},e.preventDefault=function(e){e=e||t.event,e&&e.preventDefault?e.preventDefault():e.returnValue=!1},e.Adapter={globalCallback:null,regOpts:{},loginOpts:{},ssoOpts:{},namedOpts:{}},e.log=function(){o(n.body).delegate("#mod_quc_pop a, #mod_quc_pop .quc-psp-gstat","mousedown",function(n){if(!t.QHPASS_MONITOR)return;var r=n.target;try{var i={cId:QHPASS_MONITOR.util.getContainerId(r),c:QHPASS_MONITOR.util.getText(r),p:"360_psp_"+e.resConfig.useType};QHPASS_MONITOR.log(i,"click")}catch(s){}})},e._btn_login_handler=function(t){e.preventDefault(t),e.login(e.resConfig.callback||e.resConfig.loginCallback)},e._btn_reg_handler=function(t){e.preventDefault(t),e.reg(e.resConfig.callback||e.resConfig.regCallback)},e._checkLoginStatus=function(){e.getUserInfo(function(t){e.setloginStatus(t),e.resConfig.initModule&&e.resConfig.initModule(t)})},e._autoLogin=function(t){if(!t&&location.host.indexOf("360.cn")>-1)return;e.getUserInfo(e.setloginStatus,function(){e.autoLogin(e.resConfig.callback)})},(t.QW&&Dom.ready||o)(function(){try{o(".btn-login-pop").click(e._btn_login_handler),o(".btn-reg-pop").click(e._btn_reg_handler),e.resConfig.isAutoLogin?e._autoLogin():e.resConfig.loginStatus&&e._checkLoginStatus(),e.log()}catch(t){}})})(QHPass,window,document);(function(e){var t=e.$,n=QHDomain.captchaUrl,r="i360",i=e.resConfig.requestScema;t.prototype.getAttr=t.prototype.getAttr||t.prototype.attr,t.prototype.ancestorNode=t.prototype.ancestorNode||t.prototype.closest,e.removeNode=function(e){e&&e.parentNode.removeChild(e)},e.removeFromArray=function(e,t){var n=[],r=0,i=t.length;for(r=0;r<i;r++)t[r]!=e&&n.push(t[r]);return n},e.bindGetcode=function(n,r){e.forEach(t(n),function(n){var r=null,s=120,o=/^(13|14|15|18)\d{9}$/;obj=t(n),clearInterval(r),obj.click(function(n){return function(){var u=t("#phoneReg").val();u?o.test(u)?(n[0].disabled=!0,e.loadJsonp(QHDomain.i360+"/smsApi/sendsmscode?account="+u+"&requestScema="+i+"&condition=2&r="+Math.random(),function(i){if(i.errno=="0"){n.removeClass("auth-code").addClass("msging"),n.val(s+"\u79d2\u540e\u70b9\u6b64\u53ef\u91cd\u53d1");var o=s;r=setInterval(function(){o<1?(n[0].disabled=!1,n.removeClass("msging").addClass("auth-code"),o=s,n.val("\u70b9\u6b64\u91cd\u53d1\u6821\u9a8c\u7801"),clearInterval(r)):(o-=1,n.val(o+"\u79d2\u540e\u70b9\u6b64\u53ef\u91cd\u53d1"))},1e3)}else if(i.errno==1106){var u="\u5e10\u53f7\u5df2\u5b58\u5728 "+e.resConfig.regOpts.tipText.reg_login_now;t(".icon-phoneReg").removeClass("icon-success").removeClass("icon-loading").addClass("icon-wrong").show(),t("#tips-phoneReg").html(u).addClass("reg-tips-wrong").show(),n[0].disabled=!1}else t(".icon-phoneReg").removeClass("icon-success").removeClass("icon-loading").addClass("icon-wrong").show(),t("#tips-phoneReg").html(i.errmsg).addClass("reg-tips-wrong").show(),n[0].disabled=!1})):e.regUtils.showErrs("phoneReg","\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef"):e.regUtils.showErrs("phoneReg","\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a")}}(obj))})},e.showBind=function(t,n){n=n||{},e.mix(n,e.resConfig.bindOpts),e.showReg(t,n)},e.showReg=function(n,r){function y(n,r,s){var o={email:n?'<li data-type="email" class= "ncur"  ><a  href="###"><span class="email-icon">\u90ae\u7bb1\u6ce8\u518c</span></a></li>':"",phone:r?'<li data-type="phone" class= "ncur"  ><a  href="###"><span class="tel-icon">\u624b\u673a\u6ce8\u518c</span></a></li>':"",name:s?'<li data-type="name" class= "ncur"  ><a  href="###"><span class="uname-icon">\u7528\u6237\u540d\u6ce8\u518c</span></a></li>':""},u="";if(i.length>1)for(var a=0,f=i.length;a<f;a++)i[a]=="normal"?i[a]="email":"",u+=o[i[a]];else u=o.email+o.phone+o.name;t("#regWays").html(u);var l=t("#regWays li");for(var a=0,f=l.length;a<f;a++){var c=t(l[a]);if(c.getAttr("data-type")==i[0]){c.removeClass("ncur").addClass("cur");break}}t("#regWays").click(function(n){var r=n.target,i=t(r).ancestorNode("li"),s=t(i)[0].getAttribute("data-type");if(t(i).hasClass("cur"))return;t("li[data-type]").removeClass("cur").addClass("ncur"),t(i).removeClass("ncur").addClass("cur"),b(s),e.preventDefault(n)})}function b(n){switch(n){case"email":e.showReg(e.Adapter.globalCallback,{regway:"email"});break;case"phone":e.showReg(e.Adapter.globalCallback,{regway:"phone"});break;case"name":e.showReg(e.Adapter.globalCallback,{regway:"name"})}t("a,button,label").focus(function(){this.blur()})}r=r||{},r.regway=r.regway||e.resConfig.regway||"normal",e.cssLoadOnce&&e.cssLoadOnce(),e.Adapter.globalCallback=n;var i=e.resConfig.regType||"normal";i=i.split("_"),regway=r.regway,regway=="phone"?e.mix(r,e.resConfig.regPhoneOpts||{}):e.mix(r,e.resConfig.regOpts||{});var s=r.title||e.resConfig&&e.resConfig.regTitle||"\u6b22\u8fce\u6ce8\u518c360",o=r.width||531,u=r.height||390,a=r.css||e.resConfig&&e.resConfig.css||"",f=r.field||["loginEmail","password","rePassword","phrase"],l=r.wrap||"",c=r.cookie_domains||e.resConfig.cookie_domains||[],h=r.afterRender||"",p=r.captFlag==null?!0:r.captFlag;customBtn=r.customBtn||!1,notMustField=r.notMustField||[],nickname=r.nickname||!1,needName=r.needName||!1,needEmailActive=regway=="name"?!1:r.needEmailActive||!1,type=r.type||(l?"wrap":"pop"),r.cookie_domains=c,regway=="email"||regway=="normal"?regway="email":regway=="phone"?f=["phone","password","rePassword","authCode"]:regway=="name"?f=["regUsername","password","rePassword","phrase"]:regway=="bind"&&(f=["regUsername","password","rePassword"]||e.resConfig&&e.resConfig.bindOpts.field),needName&&regway!="name"&&regway!="bind"&&needName&&f.splice(1,0,"regUsername");if(nickname&&regway!="name"&&regway!="bind")for(var d=0,v=f.length;d<v;d++)if(f[d]=="password"){f.splice(d,0,"nickname");break}a&&e.loadCss&&e.loadCss(a);var m=[];f=regway!="bind"?"formStart#"+f.join("#")+"#formEnd":"formStart#"+f.join("#")+"#formBindEnd",f=f.split("#"),e.tpl.temp[regway+"Reg"]==""&&(e.forEach(f,function(t){m.push(e.tpl.regTpl[t])}),regway=="email"||regway=="normal"?e.tpl.temp.emailReg=m.join(""):e.tpl.temp[regway+"Reg"]=m.join(""));if(type=="pop")e.resConfig.regPopOnce&&(e.closePop&&e.closePop(),e.addPop(u,o,"reg"),regway!="bind"?y("email","tel","name"):(t(".reg-nav").hide(),t(".reg-quc-content").css({"padding-left":"10px"})),e.resConfig.regPopOnce=!1),t("#modQiUserPop").html(e.tpl.temp[regway+"Reg"]),regway=="name"?t(".has-account").css({"margin-top":165+52*(3-i.length)+"px"}):t(".has-account").css({"margin-top":227+52*(3-i.length)+"px"}),e.resizeAndshow(u,o);else{if(!l)return;t("#"+l).html(e.tpl.temp[regway+"Reg"])}e.forEach(t(".tipinput"),function(e,n){t(e).attr("tabindex",n+1)}),s&&t("#qucPanelTitle").html(s);try{t(document.body).delegate(".clk-quc-login","click",e._reg2login)}catch(g){}p&&e.refreshCaptcha(),regway=="bind"&&(t("#qucpspregForm").attr("action",QHDomain.i360+"/profile/dotraninfo"),t("#qucPopcrumb").val(r.crumb||""),t("#loginEmail").attr("name","loginEmail")),e.resConfig&&e.resConfig.postCharset&&t(".mod-qiuser-pop input[id=pageType]").val(e.resConfig.postCharset),needEmailActive&&t("#loginEmailActiveFlag").val(1),h&&h();try{t(".pop-dia-close").click(function(t){e.closePop&&e.closePop(),e.preventDefault(t)})}catch(g){}e.regUtils.initEvent(e.Adapter.globalCallback,r)},e._reg2login=e._reg2login||function(t){e.login(e.Adapter.globalCallback),e.preventDefault(t)},e.initFormByUrl=function(n){var r=e.queryUrl(location.href,"src")||"";r&&t("#src"+n).val(r)},e.refreshCaptcha=function(){e.queryUrl(location.href,"captcha")=="b360"&&(n=QHDomain.i360+"/reg/doGetCap?app="),t("#wm").attr("src",n+r+"&requestScema="+i+"&r="+Math.random())}})(QHPass),function(e){e.resConfig.regOpts.tipText={reg_default_loginEmail:'\u8bf7\u8f93\u5165\u60a8\u7684\u5e38\u7528\u90ae\u7bb1\uff0c<a target="_blank" class="fac" href="http://reg.email.163.com/mailregAll/reg0.jsp"> \u6ca1\u6709\u90ae\u7bb1\uff1f</a>',reg_default_regUsername:"2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587",reg_default_nickname:"2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587",reg_default_password:"6-20\u4e2a\u5b57\u7b26\uff0c\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09",reg_default_rePassword:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",reg_default_phrase:"\u8bf7\u8f93\u5165\u56fe\u4e2d\u7684\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199",reg_default_phoneReg:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",reg_default_authCode:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u4e2d6\u4f4d\u6570\u5b57\u6821\u9a8c\u7801",reg_default_realName:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u771f\u5b9e\u59d3\u540d",reg_default_idCardNum:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u8eab\u4efd\u8bc1\u53f7\u7801",reg_wrong_default_loginEmail:'\u8bf7\u8f93\u5165\u60a8\u7684\u5e38\u7528\u90ae\u7bb1\uff0c<a target="_blank" class="fac" href="http://reg.email.163.com/mailregAll/reg0.jsp"> \u6ca1\u6709\u90ae\u7bb1\uff1f</a>',reg_wrong_default_regUsername:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",reg_wrong_default_phoneReg:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",reg_wrong_default_nickname:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0",reg_wrong_default_password:"\u5bc6\u7801\u5e94\u4e3a6-20\u4e2a\u5b57\u7b26\uff0c\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09",reg_wrong_default_rePassword:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u6837\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",reg_wrong_default_phrase:"\u8bf7\u6b63\u786e\u586b\u5199\u9a8c\u8bc1\u7801",reg_wrong_default_authCode:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u4e2d6\u4f4d\u6570\u5b57\u6821\u9a8c\u7801",reg_wrong_loginEmail_empty:"\u8bf7\u8f93\u5165\u60a8\u7684\u5e38\u7528\u90ae\u7bb1",reg_wrong_loginEmail_format:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740",reg_wrong_password_chinese:"\u5bc6\u7801\u4e0d\u80fd\u542b\u6709\u4e2d\u6587\u6216\u5168\u89d2\u5b57\u7b26",reg_wrong_password_same_chars:"\u5bc6\u7801\u4e0d\u80fd\u5168\u4e3a\u76f8\u540c\u5b57\u7b26",reg_wrong_password_empty:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",reg_wrong_password_emptychars:"\u5bc6\u7801\u4e0d\u80fd\u5168\u90e8\u4e3a\u7a7a\u683c",reg_wrong_password_weaklevel:"\u5bc6\u7801\u5f31\uff0c\u6709\u98ce\u9669\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",reg_wrong_password_lx_chars:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u8fde\u7eed\u5b57\u7b26",reg_wrong_repassword_empty:"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",reg_wrong_repassword_emptychars:"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u5168\u90e8\u4e3a\u7a7a\u683c",reg_wrong_phrase_input:"\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",reg_wrong_phrase_ban:"\u9a8c\u8bc1\u7801\u8fde\u7eed\u9519\u8bef\u6b21\u6570\u8fc7\u591a\uff0c\u8bf7\u6539\u5929\u518d\u6765",reg_wrong_isagree:"\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a360\u7528\u6237\u670d\u52a1\u6761\u6b3e\u300b",reg_wrong_process_error:"\u6ce8\u518c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u610f\u5916\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",net_check:"\u68c0\u67e5\u4e2d\uff0c\u8bf7\u7a0d\u540e...",reg_wrong_username_short:"\u7528\u6237\u540d\u6700\u5c11\u4f7f\u75282\u4e2a\u5b57\u7b26\u6216\u6c49\u5b57",reg_wrong_username_long:"\u7528\u6237\u540d\u4e0d\u8d85\u8fc77\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u7b26",reg_wrong_username_chars:"\u7528\u6237\u540d\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26",reg_wrong_username_empty:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7528\u6237\u540d",reg_wrong_nickname_short:"\u6635\u79f0\u6700\u5c11\u4f7f\u75282\u4e2a\u5b57\u7b26\u6216\u6c49\u5b57",reg_wrong_nickname_long:"\u6635\u79f0\u4e0d\u8d85\u8fc77\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u7b26",reg_wrong_nickname_chars:"\u6635\u79f0\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26",reg_wrong_nickname_empty:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u6635\u79f0",reg_wrong_authCode_empty:"\u6821\u9a8c\u7801\u4e0d\u80fd\u4e3a\u7a7a",reg_wrong_phoneNumber_empty:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",reg_wrong_phoneNumber_format:"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef",reg_wrong_format_authCode:"\u6821\u9a8c\u7801\u683c\u5f0f\u9519\u8bef",reg_wrong_idCardNum_empty:"\u8eab\u4efd\u8bc1\u53f7\u4e0d\u80fd\u4e3a\u7a7a",reg_wrong_realName_empty:"\u771f\u5b9e\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a",reg_wrong_realName:"\u59d3\u540d\u4e0d\u6b63\u786e\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u59d3\u540d",reg_wrong_idCardNum:"\u8bf7\u68c0\u67e5\u4f60\u7684\u8eab\u4efd\u8bc1\u53f7\u7801\uff0c\u652f\u630115\u4f4d\u6216\u800518\u4f4d",reg_wrong_age_lt18:"\u60a8\u672a\u6ee118\u5c81\uff0c\u4e0d\u80fd\u901a\u8fc7\u7533\u8bf7\u6ce8\u518c",reg_login_now:'<a target="_blank" class="fac clk-quc-login" href="###">\u7acb\u5373\u767b\u5f55</a>'};var t=e.$,n=[],r=[],i=!0,s=!1,o=[],u=null,a="",f=!1,l=!1,c="",h=[],p="\u6b63\u5728\u6ce8\u518c\u4e2d\uff0c\u8bf7\u7a0d\u540e",d=null,v=null,m=null,g=null,y=[],b="1",w="",E={prevloginEmail:"",prevuserName:"",prevnickName:""},S=e.resConfig.requestScema,x=["asdasd","asdfgh","asdfghjkl","Iloveyou","qwerty","Password","Passwd","Woaini","Wodemima","Woaiwojia","zxcvbn","tamade","nimade","123abc","0123456","0123456789","100200","102030","121212","111222","115415","123000","123123","123789","12301230","123321","123456","1234560","123465","1234567","12345678","123456789","1234567890","123123123","1314520","1314521","147258369","147852369","159357","168168","201314","211314","321321","456456","4655321","521521","5201314","520520","741852","741852963","7758258","7758521","654321","852963","987654","963852741","000000","111111","11111111","112233","666666","888888","abcdef","abcabc","abc123","a1b2c3","aaa111","123qwe","qweasd","admin","password","p@ssword","passwd","iloveyou","1qaz2wsx","qwertyuiop","qq123456","1q2w3e4r","123456abc","abc123456","qazwsxedc","1q2w3e4r5t"];t.prototype.parent=t.prototype.parent||t.prototype.parentNode,t.prototype.bind=t.prototype.bind||t.prototype.on;var T={showErrs:function(e,n){return clearTimeout(v),this.inArray(o,e)==-1&&o.push(e),t(".icon-"+e).removeClass("icon-success").removeClass("icon-loading").addClass("icon-wrong").show(),t("#tips-"+e).html(n).removeClass("reg-tips-success").addClass("reg-tips-wrong").show(),!1},showCorrect:function(n,r){return this.reset(n),t(".icon-"+n).removeClass("icon-wrong").removeClass("icon-loading").addClass("icon-success").show(),w=="pop"?t("#tips-"+n).html(e.resConfig.regOpts.tipText["reg_default_"+n]).removeClass("reg-tips-wrong").addClass("reg-tips-success").show():t("#tips-"+n).hide(),!0},reset:function(n){o=e.removeFromArray(n,o),t(".tips-wrong-"+n).hide()},loadingFun:function(e){t(".icon-"+e).removeClass("icon-info").addClass("icon-loading"),t("#tips-"+e).hide()},loginEmail:function(n){n=n||"";var r=e.trim(t("#qucpspregForm")[0].loginEmail.value),i=QHDomain.login_http+"/index.php?op=checkemail&requestScema="+S+"&loginEmail="+r+"&r="+Math.random();E.prevloginEmail=r;if(!r)return this.showErrs("loginEmail",e.resConfig.regOpts.tipText.reg_wrong_loginEmail_empty);if(r&&!this.isEmail(r))return this.showErrs("loginEmail",e.resConfig.regOpts.tipText.reg_wrong_loginEmail_format);r&&(n||(this.loadingFun("loginEmail"),e.loadJsonp(i,e.regUtils.loginEmailCallback)))},realName:function(){var n=e.trim(t("#qucpspregForm")[0].realName.value),r=/^[\u4e00-\u9fa5]{2,5}$/;return n?n&&!r.test(n)?this.showErrs("realName",e.resConfig.regOpts.tipText.reg_wrong_realName):this.showCorrect("realName",e.resConfig.regOpts.tipText.reg_default_realName):this.showErrs("realName",e.resConfig.regOpts.tipText.reg_wrong_realName_empty)},idCardNum:function(){function d(e,t){for(var n=0;n<t.length;n++)e=e.replace(t[n][0],t[n][1]);return e}function v(e){return d(e,[[/[\uff01-\uff5e]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}],[/\u3000/g," "],[/\u3002/g,"."]])}var n=e.trim(t("#qucpspregForm")[0].idCardNum.value);n=v(n);var r=n=="";if(!!r)return this.showErrs("idCardNum",e.resConfig.regOpts.tipText.reg_wrong_idCardNum_empty);if(/^\d{15}$/.test(n))r=!0;else if(/^\d{17}[0-9xX]$/.test(n)){var i="1,0,x,9,8,7,6,5,4,3,2".split(","),s="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(","),o=n.toLowerCase().split(""),u=0;for(var a=0;a<17;a++)u+=s[a]*o[a];r=i[u%11]==o[17]}if(!r)return this.showErrs("idCardNum",e.resConfig.regOpts.tipText.reg_wrong_idCardNum);var f=n.substring(6,14),l=new Date,c=new Date(f.substring(0,4),f.substring(4,6),f.substring(6,8)),h=l-c,p=Math.round(h/31536e6);p<18?(r=!1,this.showErrs("idCardNum",e.resConfig.regOpts.tipText.reg_wrong_age_lt18)):r=!0,r&&this.showCorrect("idCardNum",e.resConfig.regOpts.tipText.reg_default_idCardNum)},regUsername:function(n){n=n||"";var r=e.trim(t("#qucpspregForm")[0].regUsername.value),i=e.byteLen(r),s=/^[0-9a-zA-Z\u4e00-\u9fa5_\.]*$/i,o=QHDomain.login_http+"/index.php?op=checkuser&requestScema="+S+"&userName="+encodeURIComponent(r)+"&r="+Math.random();E.prevUserName=r;if(!r)return this.showErrs("regUsername",e.resConfig.regOpts.tipText.reg_wrong_username_empty);if(0==s.test(r))return this.showErrs("regUsername",e.resConfig.regOpts.tipText.reg_wrong_username_chars);if(r&&i<2)return this.showErrs("regUsername",e.resConfig.regOpts.tipText.reg_wrong_username_short);if(r&&i>14)return this.showErrs("regUsername",e.resConfig.regOpts.tipText.reg_wrong_username_long);r&&(n||(this.loadingFun("regUsername"),e.loadJsonp(o,e.regUtils.checkUsernameCallback)))},nickname:function(n){n=n||"";var r=e.trim(t("#qucpspregForm")[0].nickname.value),i=e.byteLen(r),s=/^[0-9a-zA-Z\u4e00-\u9fa5_\.]*$/i,o=QHDomain.login_http+"/index.php?op=checknickname&requestScema="+S+"&nickName="+encodeURIComponent(r)+"&r="+Math.random();E.prevnickName=r;if(!r)return this.showErrs("nickname",e.resConfig.regOpts.tipText.reg_wrong_nickname_empty);if(0==s.test(r))return this.showErrs("nickname",e.resConfig.regOpts.tipText.reg_wrong_nickname_chars);if(r&&i<2)return this.showErrs("nickname",e.resConfig.regOpts.tipText.reg_wrong_nickname_short);if(r&&i>14)return this.showErrs("nickname",e.resConfig.regOpts.tipText.reg_wrong_nickname_long);r&&(n||(this.loadingFun("nickname"),e.loadJsonp(o,e.regUtils.checkNicknameCallback)))},phoneReg:function(n){n=n||"";var r=t("#qucpspregForm")[0].phoneReg.value,i=QHDomain.login_http+"/index.php?op=checkmobile&requestScema="+S+"&mobile="+encodeURIComponent(r)+"&r="+Math.random();regTel=/^(13|14|15|18)\d{9}$/;if(!r)return this.showErrs("phoneReg",e.resConfig.regOpts.tipText.reg_wrong_phoneNumber_empty);if(!regTel.test(r))return this.showErrs("phoneReg",e.resConfig.regOpts.tipText.reg_wrong_phoneNumber_format);r&&(n||(this.loadingFun("phoneReg"),e.loadJsonp(i,e.regUtils.checkPhoneCallback)))},checkPhoneCallback:function(n){if(0==n.errno)e.regUtils.showCorrect("phoneReg",n.errmsg),t("#getAuthcode")[0].disabled=!1;else if(n.errno==1037){var r=n.errmsg+" "+e.resConfig.regOpts.tipText.reg_login_now;t("#getAuthcode")[0].disabled=!0,e.regUtils.showErrs("phoneReg",r)}else e.regUtils.showErrs("phoneReg",n.errmsg)},authCode:function(){var n=t("#qucpspregForm")[0].authCode.value,r=/^\d{6}$/i;if(!n)return this.showErrs("authCode",e.resConfig.regOpts.tipText.reg_wrong_authCode_empty);if(!r.test(n))return this.showErrs("authCode",e.resConfig.regOpts.tipText.reg_wrong_format_authCode);if(n.length!=6)return this.showErrs("authCode",e.resConfig.regOpts.tipText.reg_wrong_default_authCode);this.reset("authCode"),t(".icon-authCode").removeClass("icon-wrong").removeClass("icon-success").addClass("icon-info"),t("#tips-authCode").html(e.resConfig.regOpts.tipText.reg_default_authCode).removeClass("reg-tips-wrong").addClass("reg-tips-success")},isEmail:function(e){if(e.length>100)return!1;if(!/^([\w\-\.]+)@(([0-9a-zA-Z\-]+\.)+[a-zA-Z]{2,4})$/i.test(e))return!1;var t=e.split("@"),n=t[1];return!0},loginEmailCallback:function(t){if(0==t.res)e.regUtils.showCorrect("loginEmail",t.msg);else if(t.errno==2e4)e.regUtils.showErrs("loginEmail",t.msg);else if(1==t.res){var n=t.msg+(b=="bind"?"":" "+e.resConfig.regOpts.tipText.reg_login_now);e.regUtils.showErrs("loginEmail",n)}else e.regUtils.showErrs("loginEmail",t.msg)},checkUsernameCallback:function(t){if(0==t.res)e.regUtils.showCorrect("regUsername",t.msg);else if(1==t.res&&t.errno==213){var n=t.msg+(b=="bind"?"":" "+e.resConfig.regOpts.tipText.reg_login_now);e.regUtils.showErrs("regUsername",n)}else e.regUtils.showErrs("regUsername",t.msg)},checkNicknameCallback:function(t){0==t.res?e.regUtils.showCorrect("nickname",t.msg):e.regUtils.showErrs("nickname",t.msg)},doRegSuccess:function(){m&&m();if(l){e.showSetName(u);return}if(f)e.getUserInfo(function(n){n=n||{},n.realName=t("#realName").val(),n.idCardNum=t("#idCardNum").val();if(n.qid>0){try{e.setloginStatus(n)}catch(r){}e.execCallback(u,n)}});else{var n={};n.realName=t("#realName").val(),n.idCardNum=t("#idCardNum").val();try{e.setloginStatus()}catch(r){}e.execCallback(u,n)}},rdCallback:function(t){if(t.errno>0){this.doRegSuccess();return}var i=r.length,s="";r[i++]=t.domain,i==n.length?(r=[],this.doRegSuccess()):(s=n[i]+"?o=sso&m=setcookie&requestScema="+S+"&func=QHPass.regUtils.rdCallback&s="+a,e.loadJsonp(s))},unique:function(e){var t=e.length,n=e.slice(0),r,i;while(--t>0){i=n[t],r=t;while(r--)if(i===n[r]){n.splice(t,1);break}}return n},inArray:function(e,t,n){var r=e.length,i=t;n|=0,n<0&&(n=Math.max(0,r+n));for(;n<r;n++)if(n in e&&e[n]===t)return n;return-1},getPassLevel:function(t){function a(e){e+="";var t=e.length,n=!0,r=e.charCodeAt(t-1)-e.charCodeAt(0)>0?1:-1;for(var i=0;i<t-1;i++)if(r!==e.charCodeAt(i+1)-e.charCodeAt(i))return n=!1,n;return n}t+="";var n=t.length,r=t.split(""),i=T.unique(r),s=i.length,o=-1;cflag=a(t);if(n<6||n>20)o=-1;else if(s==1)o=0;else if(cflag)o=1;else if(x.join("#").indexOf(t)>-1)o=2;else{var u={d:0,c:0,o:0};e.forEach(i,function(e,t){/\d/.test(e)?u.d=1:/[a-zA-Z]/.test(e)?u.c=1:u.o=1}),o=u.d+u.c+u.o+(n>9?2:1),o=o==2?o+1:o}return o},password:function(){var n="password",r=t("#qucpspregForm")[0].password[0].value,i=T.getPassLevel(r),s=/[^\x00-\xff]/,o=/^\s*$/,u=t("#qucpspregForm")[0].rePassword[0].value;if(!(r&&r.length>=6&&r.length<=20))return this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_default_password);if(s.test(r))return u&&r!=u&&this.showErrs("rePassword",e.resConfig.regOpts.tipText.reg_wrong_default_rePassword),this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_password_chinese);if(i<3){if(!r)return this.showErrs("password",e.resConfig.regOpts.tipText.reg_wrong_password_empty);if(o.test(r))return this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_password_emptychars);i==0?this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_password_same_chars):i==1?this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_password_lx_chars):i==2?this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_password_weaklevel):this.showErrs(n,e.resConfig.regOpts.tipText.reg_wrong_password_weaklevel),u&&r!=u&&this.showErrs("rePassword",e.resConfig.regOpts.tipText.reg_wrong_default_rePassword)}else this.showCorrect(n,e.resConfig.regOpts.tipText.reg_default_password),u&&r==u&&this.showCorrect("rePassword",e.resConfig.regOpts.tipText.reg_wrong_default_rePassword)},rePassword:function(){var n=t("#qucpspregForm")[0].password[0].value,r=/^\s*$/,i=t("#qucpspregForm")[0].rePassword[0].value;return i?r.test(i)?this.showErrs("rePassword",e.resConfig.regOpts.tipText.reg_wrong_repassword_emptyChars):n!=i?this.showErrs("rePassword",e.resConfig.regOpts.tipText.reg_wrong_default_rePassword):this.showCorrect("rePassword",e.resConfig.regOpts.tipText.reg_default_rePassword):this.showErrs("rePassword",e.resConfig.regOpts.tipText.reg_wrong_repassword_empty)},phrase:function(){if(!i)return;var n=e.trim(t("#qucpspregForm")[0].phrase.value);if(n.length!=4)return this.showErrs("phrase",e.resConfig.regOpts.tipText.reg_wrong_default_phrase);this.reset("phrase"),w=="pop"?(t(".icon-phrase").hide(),t("#tips-phrase").hide()):(t(".icon-phrase").removeClass("icon-wrong").removeClass("icon-success").addClass("icon-info"),t("#tips-phrase").html(e.resConfig.regOpts.tipText.reg_default_phrase).removeClass("reg-tips-wrong").addClass("reg-tips-success"))},beforeSubmit:function(){if(!t("#srcreg").val()&&b!="bind")return!1;e.forEach(t(".tipinput"),function(e){var t=e.getAttribute("id");T[t]("beck")});if(o.length>0)return!1;if(!t("#is_agree").attr("checked")&&b!="bind")return T.showGlobalTips(e.resConfig.regOpts.tipText.reg_wrong_isagree),!1;v=setTimeout(function(){T.showGlobalTips("\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\uff01")},2e4),T.beforeSetValue()},modifyTips:function(t){e.mix(e.resConfig.regOpts.tipText,t,!0)},initEvent:function(r,a){u=r,y=a.field||[],g=a.errorfun||"",m=a.successfun||"",h=a.notMustField||[],b=a.regway||"normal",w=a.type||"pop",t("#accoutType").val(b=="email"||b=="normal"?1:b=="phone"?2:4),o.length=0,i=a.captFlag==null?!0:a.captFlag,f=a.getInfoAfterReg||e.resConfig&&e.resConfig.getInfoAfterReg||!1,l=a.isSetname||!1,n=[];var c=a.src||e.resConfig&&e.resConfig.src||"";if(a.cookie_domains.length==2&&a.cookie_domains[1]=="nc"||a.cookie_domains[0]=="360")s=!0;else{var p=a.cookie_domains.length&&a.cookie_domains||[e._hostShort];e.forEach(p[0].split("|"),function(t){var r=e._hostShort2long[t];r&&n.push(S+"://login."+r)})}e.initFormByUrl("reg"),c&&t("#srcreg").val(c),t(".tipinput").focus(function(){var n=t(this).attr("id"),r="";n=="phrase"?t(this).parent().removeClass("verify-code").addClass("verify-code-focus"):n=="phoneReg"?t(this).parent().removeClass("input-phone-bg").addClass("input-phone-bg-focus"):t(this).parent().removeClass("input-bg").addClass("input-bg-focus");if(n=="nickname"||n=="regUsername"||n=="loginEmail")E["prev"+n]=t("#"+n).val();r=n=="password"||n=="rePassword"?t("#qucpspregForm")[0][n][0].value:t("#qucpspregForm")[0][n].value,r||(w!="pop"?t(".icon-"+n).removeClass("icon-wrong").addClass("icon-info").show():t(".icon-"+n).removeClass("icon-wrong").addClass("icon-info").hide(),t("#tips-"+n).html(e.resConfig.regOpts.tipText["reg_default_"+n]).show().removeClass("reg-tips-wrong"))}).blur(function(){var n=t(this).attr("id"),r=n=="password"||n=="rePassword"?t("#qucpspregForm")[0][n][0].value:t("#qucpspregForm")[0][n].value;empty=/^\s*$/,n=="phrase"?t(this).parent().removeClass("verify-code-focus").addClass("verify-code"):n=="phoneReg"?t(this).parent().removeClass("input-phone-bg-focus").addClass("input-phone-bg"):t(this).parent().removeClass("input-bg-focus").addClass("input-bg");if(!r){n=="loginEmail"?t("#tips-"+n).addClass("reg-tips-wrong").show():t("#tips-"+n).html(e.resConfig.regOpts.tipText["reg_wrong_default_"+n]).addClass("reg-tips-wrong").show(),t(".icon-"+n).removeClass("icon-info").removeClass("icon-success").addClass("icon-wrong").show();return}if((n=="nickname"||n=="regUsername"||n=="loginEmail")&&E["prev"+n]==t("#"+n).val())return;T[n]()}),t("#password").bind("keyup",function(n){t("#tips-password").html(e.resConfig.regOpts.tipText.reg_default_password).removeClass("reg-tips-wrong");if(t(this).val()){var r=parseInt(T.getPassLevel(t(this).val()));if(r==-1)return T.showErrs("password",e.resConfig.regOpts.tipText.reg_wrong_default_password);r<3?(r=2,t("#tips-password").html('<span class="level2">\u5f31\uff1a</span>\u8bd5\u8bd5\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u6807\u7b7e\u7b26\u53f7'),w!="pop"&&t(".icon-password").removeClass("icon-wrong").addClass("icon-info")):r==3?(t("#tips-password").html('<span class="level3">\u4e2d\uff1a</span>\u8bd5\u8bd5\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u6807\u7b7e\u7b26\u53f7'),w!="pop"&&t(".icon-password").removeClass("icon-wrong").addClass("icon-info")):r>=4&&(t("#tips-password").html('<span class="level4">\u5f3a\uff1a</span>\u8bf7\u7262\u8bb0\u4f60\u7684\u5bc6\u7801'),w!="pop"&&t(".icon-password").removeClass("icon-wrong").addClass("icon-info"))}}),t("#phraseLi")[i?"show":"hide"](),t("#captchaFlag").val(+i),t("#wm,#refreshCaptcha").click(function(n){e.preventDefault(n),e.refreshCaptcha(),t("#phrase").val("").focus()}),e.bindGetcode(".btn-auth-code")},beforeSetValue:function(){if(b=="normal"||b=="email"){var n=t("#loginEmail");t("#loginEmail").val(e.trim(n.val()))}else if(b=="name"){var r=t("#regUsername");r.val(e.trim(r.val()))}var i=t("#topassword"),s=t("#torePassword");i.val(hex_md5(t("#password").val())),s.val(hex_md5(t("#rePassword").val())),typeof vcTime!="undefined"&&t("#vc").val(vcTime),t("#regGlobal_tips").hide(),t("#regSubmitBtn").removeClass("btn-register").addClass("btn-register-loading").val("\u63d0\u4ea4\u4e2d...")},showGlobalTips:function(e){clearTimeout(v);var n=b=="bind"?"\u63d0\u4ea4":"\u7acb\u5373\u6ce8\u518c";t("#regSubmitBtn").removeClass("btn-register-loading").addClass("btn-register").val(n),t("#regGlobal_tips").html(e).show()},submitCallback:function(r){try{if(r.errno==0)if(r.activeurl)if(w=="pop"){var o=decodeURIComponent(r.activeurl)+"&destUrl="+encodeURIComponent(location.href),f=t("#qucpspregForm")[0].loginEmail.value,l=f.substring(0,f.indexOf("@")),h=f.substring(f.indexOf("@"));c=o,e.loadJsonp(c,function(n){e.closePop&&e.closePop(),e.addPop("100","408","login"),e.resizeAndshow("100","408"),t("#qucPanelTitle").html("\u6d88\u606f\u63d0\u793a");try{t(".pop-dia-close").click(function(t){e.closePop&&e.closePop(),e.preventDefault(t)})}catch(r){}n.errno==0?(t("#modQiUserPop").html(e.tpl.activeTpl),t(".set-active-result").show(),e.byteLen(f)>20?t("#secactiveverify").html(l.replace(/(\w)\w+(\w)/ig,"$1******$2")+h):f&&t("#secactiveverify").html(f),n.goToMail?t("#qucgoactive").attr("href",n.goToMail):t(".go-sec-mail").hide(),t("#click_resendMail").on("click",function(n){e.loadJsonp(c,function(e){e.errno==0?(t("#resendmail_result").show(),setTimeout(function(){t("#resendmail_result").hide()},3e3)):t("#modQiUserPop").html('<div style="padding:40px;font-size:14px"><p>'+e.errmsg+"</p></div>")}),e.preventDefault(n)})):(t("#modQiUserPop").html('<div style="padding:40px;font-size:14px"><p>'+n.errmsg+',<a href="#"  class="fac"  id="click_resendMail" target="_blank">\u70b9\u6b64\u91cd\u53d1\u4e00\u5c01</a></p></div>'),t("#click_resendMail").on("click",function(n){e.loadJsonp(c,function(e){e.errno==0?(t("#resendmail_result").show(),setTimeout(function(){t("#resendmail_result").hide()},3e3)):t("#modQiUserPop").html('<div style="padding:40px;font-size:14px"><p>'+e.errmsg+',<a href="#"  class="fac"  id="click_resendMail" target="_blank">\u70b9\u6b64\u91cd\u53d1\u4e00\u5c01</a></p></div>')}),e.preventDefault(n)}))})}else location.href=decodeURIComponent(r.activeurl)+"&destUrl="+encodeURIComponent(location.href);else{var p="",d=t("#qucpspregForm")[0];if(b!="email"&&b!="normal"||!d.loginEmail){if(b=="phone"&&d.phoneReg)p=e.trim(d.phoneReg.value);else if(b=="name"&&d.regUsername)p=e.trim(d.regUsername.value);else if(b=="bind"){e.autoLogin(u),e.closePop&&e.closePop();return}}else p=e.trim(d.loginEmail.value);p==""&&d.regUsername&&(p=e.trim(d.regUsername.value)),e.Cookie.set("i360loginName",p,{expires:5184e6,path:"/"}),a=r.rd;if(a&&!s){var m=n.length,y=0,E=n[y]+"?o=sso&m=setcookie&requestScema="+S+"&func=QHPass.regUtils.rdCallback&s="+a;e.loadJsonp(E)}else this.doRegSuccess()}else{g&&g(r),clearTimeout(v);var x=b=="bind"?"\u63d0\u4ea4":"\u7acb\u5373\u6ce8\u518c";t("#regSubmitBtn").removeClass("btn-register-loading").addClass("btn-register").val(x),t("#regGlobal_tips").hide();if(r.errno==-2)return t("#phrase").focus(),e.refreshCaptcha(),this.showErrs("phrase",e.resConfig.regOpts.tipText.reg_wrong_phrase_input);if(r.errno==-3)return t("#phrase").focus(),e.refreshCaptcha(),this.showErrs("phrase",e.resConfig.regOpts.tipText.reg_wrong_phrase_ban);if(r.errno==1670)i=!0,t("#phraseLi").show(),e.refreshCaptcha(),t("#phrase").focus();else{if(r.errno==1351)return t("#authCode").focus(),e.refreshCaptcha(),this.showErrs("authCode",decodeURIComponent(r.errmsg));if(r.errmsg.indexOf("\u5bc6\u7801")!=-1)return this.showErrs("password",decodeURIComponent(r.errmsg));T.showGlobalTips(decodeURIComponent(r.errmsg));try{e.refreshCaptcha(),t("#phrase").val("")}catch(N){}}}}catch(N){T.showGlobalTips(e.resConfig.regOpts.tipText.reg_wrong_process_error)}}};e.getPassLevel=function(e){return T.getPassLevel(e)},e.regUtils=T}(QHPass),QHPass.tpl.regTpl={formStart:['<div id="modRegWrap" class="mod-qiuser-pop">','<iframe src="" name ="qucpspregIframe" style="display:none"></iframe>','<form id="qucpspregForm" method="post" name="qucpspregForm" target="qucpspregIframe" onsubmit="return QHPass.regUtils.beforeSubmit()" action='+QHDomain.i360+"/reg/doregAccount >",'<dl class="reg-wrap">','<dt><span id="qucRegGuide"></span><div id="regGlobal_tips" class="reg-global-error reg-global-success reg-global-loading"></div></dt>'].join(""),loginEmail:["<dd>",'<div class="quc-clearfix reg-item" >','<label for="loginEmail">\u90ae\u7bb1</label>','<span class="input-bg"><input type="text"  id="loginEmail"  name="account" maxlength="100" autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-loginEmail"></b>',"</div>",'<span id="tips-loginEmail" class="text-tips tips-loginEmail">\u8bf7\u8f93\u5165\u60a8\u7684\u5e38\u7528\u90ae\u7bb1\uff0c<a target="_blank" class="fac" href="http://reg.email.163.com/mailregAll/reg0.jsp"> \u6ca1\u6709\u90ae\u7bb1\uff1f</a></span>',"</dd>"].join(""),nickname:["<dd>",'<div class="quc-clearfix reg-item" >','<label for="nickname">\u6635\u79f0</label>','<span class="input-bg"><input type="text"  id="nickname"  name="nickName" maxlength="14" autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-nickname"></b>',"</div>",'<span id="tips-nickname" class="text-tips tips-nickname">2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587</span>',"</dd>"].join(""),idCardNum:["<dd>",'<div class="quc-clearfix reg-item" >','<label for="idCardNum">\u8eab\u4efd\u8bc1\u53f7</label>','<span class="input-bg"><input type="text"  id="idCardNum"   maxlength="100" autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-idCardNum"></b>',"</div>",'<span id="tips-idCardNum" class="text-tips tips-idCardNum">\u8bf7\u8f93\u5165\u6709\u6548\u7684\u8eab\u4efd\u8bc1\u53f7\u7801</span>',"</dd>"].join(""),realName:["<dd>",'<div class="quc-clearfix reg-item" >','<label for="realName">\u771f\u5b9e\u59d3\u540d</label>','<span class="input-bg"><input type="text"  id="realName"   maxlength="100" autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-realName"></b>',"</div>",'<span id="tips-realName" class="text-tips tips-realName">\u8bf7\u8f93\u5165\u6709\u6548\u7684\u771f\u5b9e\u59d3\u540d</span>',"</dd>"].join(""),phone:['<dd class="phone">','<div class="quc-clearfix reg-item" >','<label for="phoneReg">\u624b\u673a\u53f7</label>','<span class="input-phone-bg"><input type="text"  id="phoneReg"  name="account" maxlength="11" autocomplete="off" class="ipt tipinput"/></span>','<input id="getAuthcode" onfocus="this.blur()" class="auth-code btn-auth-code" value="\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801" />','<b class="icon-phoneReg"></b>',"</div>",'<span id="tips-phoneReg" class="text-tips tips-phoneReg">\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7</span>','<div class="btn-authcode">','<a class="ques-link" target="_blank" href="http://i.360.cn/help/smscode">\u6821\u9a8c\u7801\u5e38\u89c1\u95ee\u9898</a>',"</div>","</dd>"].join(""),authCode:["<dd>",'<div class="quc-clearfix reg-item" >','<label for="authCode">\u6821\u9a8c\u7801</label>','<span class="input-bg"><input type="text" id="authCode" name="smscode" maxlength="6" autocomplete="off"  class="ipt tipinput "></span>','<b class="icon-authCode"></b>',"</div>",'<span id="tips-authCode" class="text-tips tips-authCode">\u8bf7\u8f93\u5165\u77ed\u4fe1\u4e2d6\u4f4d\u6570\u5b57\u6821\u9a8c\u7801</span>',"</dd>"].join(""),regUsername:["<dd>",'<div class="quc-clearfix reg-item">','<label for="regUsername">\u7528\u6237\u540d</label>','<span class="input-bg"><input type="text"  maxlength="14" id="regUsername" name="userName" autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-regUsername"></b>',"</div>",'<span id="tips-regUsername" class="text-tips tips-regUsername">2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587</span>',"</dd>"].join(""),password:["<dd>",'<div class="quc-clearfix reg-item">','<label for="password">\u5bc6\u7801</label>','<span class="input-bg"><input type="password"   id="password"  autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-password"></b>',"</div>",'<span id="tips-password" class="text-tips tips-password">6-20\u4e2a\u5b57\u7b26\uff0c\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09</span>',"</dd>"].join(""),rePassword:["<dd>",'<div class="quc-clearfix reg-item">','<label for="rePassword">\u786e\u8ba4\u5bc6\u7801</label>','<span class="input-bg"><input type="password" id="rePassword" autocomplete="off" class="ipt tipinput"/></span>','<b class="icon-rePassword "></b>',"</div>",'<span id="tips-rePassword" class="text-tips tips-rePassword">\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801</span>',"</dd>"].join(""),phrase:['<dd class="rem" id="phraseLi" >','<label for="phrase">\u9a8c\u8bc1\u7801</label>','<span class="verify-code"><input type="text"  maxlength="4" id="phrase" name="phrase" class="ipt1 tipinput" autocomplete="off"></span>','<span class="yz"><img width="99" height="35" style="cursor: pointer;" id="wm"><a  class="fac ml8" href="#nogo" id="refreshCaptcha">\u6362\u4e00\u5f20</a>','</span><b class="icon-phrase"></b>','<p class="phrase-tips"><span id="tips-phrase" class="tips-phrase">\u8bf7\u8f93\u5165\u56fe\u4e2d\u7684\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199</span></p>',"</dd>"].join(""),formEnd:['<dd class="submit">','<input type="submit" onfocus="this.blur()" text="\u7acb\u5373\u6ce8\u518c" id="regSubmitBtn" value="\u7acb\u5373\u6ce8\u518c" class="btn-register quc-psp-gstat">',"</dd>",'<dd class="rules">','<label style="" for="is_agree">','<input type="checkbox" name="is_agree" id="is_agree" tabindex="5" checked="checked" value="1">\u6211\u5df2\u7ecf\u9605\u8bfb\u5e76\u540c\u610f</label>','<a href="http://i.360.cn/pub/protocol.html" class="fac" target="_blank">\u300a360\u7528\u6237\u670d\u52a1\u6761\u6b3e\u300b</a>',"</dd>","</dl>",'<input id="srcreg" type="hidden" value="" name="src">','<input id="loginEmailActiveFlag" type="hidden" value="0" name="loginEmailActiveFlag">','<input id="pageType" type="hidden" value="utf-8" name="charset">','<input id="accoutType" type="hidden" value="" name="acctype">','<input id="pwdmethod" type="hidden" value="1" name="pwdmethod">','<input id="proxy" type="hidden" value="'+QHPass.resConfig.requestScema+"://"+location.host+'/psp_jump.html" name="proxy">','<input id="topassword" type="hidden" value="" name="password">','<input id="torePassword" type="hidden" value="" name="rePassword">','<input id="callback" type="hidden" value="parent.QHPass.regUtils.submitCallback" name="callback">','<input id="captchaFlag" type="hidden" value="1" name="captchaFlag">','<input id="captchaAppId" type="hidden" value="i360" name="captchaAppId">',"</form></div>"].join(""),formBindEnd:['<dd class="submit">','<input type="submit" onfocus="this.blur()" text="bind\u63d0\u4ea4" id="regSubmitBtn" value="\u63d0\u4ea4" class="btn-register quc-psp-gstat">',"</dd>",'<dd class="rules">','<input id="proxy" type="hidden" value="'+QHPass.resConfig.requestScema+"://"+location.host+'/psp_jump.html" name="proxy">','<input id="topassword" type="hidden" value="" name="password">','<input id="torePassword" type="hidden" value="" name="rePassword">','<input id="callback" type="hidden" value="parent.QHPass.regUtils.submitCallback" name="callback">','<input id="qucPopcrumb" type="hidden" value="" name="crumb"></dd></dl>',"</form></div>"].join("")},QHPass.tpl.activeTpl='<div class="set-active-result" id="setactiveResult"><p>\u9a8c\u8bc1\u90ae\u4ef6\u5df2\u7ecf\u53d1\u9001\u5230<span class="active-tips" id="secactiveverify"></span></p><p>\u4f60\u9700\u8981\u70b9\u51fb\u90ae\u7bb1\u4e2d\u7684\u786e\u8ba4\u94fe\u63a5\u6765\u5b8c\u6210</p><p class="go-sec-mail"><a  href="#" class="fac"  id="qucgoactive" target="_blank">\u7acb\u5373\u8fdb\u5165\u90ae\u7bb1</a></p><p class="result-title">\u6ca1\u6709\u6536\u5230\u786e\u8ba4\u94fe\u63a5\u600e\u4e48\u529e\uff1f</p><p>1.\u770b\u770b\u662f\u5426\u5728\u90ae\u7bb1\u7684\u56de\u6536\u7ad9\u4e2d\uff0c\u5783\u573e\u90ae\u7bb1\u4e2d</p><p>2.\u786e\u8ba4\u6ca1\u6709\u6536\u5230\uff0c<a href="#"  class="fac"  id="click_resendMail" target="_blank">\u70b9\u6b64\u91cd\u53d1\u4e00\u5c01</a><span class="resend-result" id="resendmail_result">\u53d1\u9001\u6210\u529f\uff01</span></p></div>',QHPass.tpl.temp={normalLogin:"",emailReg:"",nameReg:"",phoneReg:"",bindReg:""};function hex_md5(e){return binl2hex(core_md5(str2binl(e),e.length*chrsz))}function b64_md5(e){return binl2b64(core_md5(str2binl(e),e.length*chrsz))}function str_md5(e){return binl2str(core_md5(str2binl(e),e.length*chrsz))}function hex_hmac_md5(e,t){return binl2hex(core_hmac_md5(e,t))}function b64_hmac_md5(e,t){return binl2b64(core_hmac_md5(e,t))}function str_hmac_md5(e,t){return binl2str(core_hmac_md5(e,t))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function core_md5(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(var o=0;o<e.length;o+=16){var u=n,a=r,f=i,l=s;n=md5_ff(n,r,i,s,e[o+0],7,-680876936),s=md5_ff(s,n,r,i,e[o+1],12,-389564586),i=md5_ff(i,s,n,r,e[o+2],17,606105819),r=md5_ff(r,i,s,n,e[o+3],22,-1044525330),n=md5_ff(n,r,i,s,e[o+4],7,-176418897),s=md5_ff(s,n,r,i,e[o+5],12,1200080426),i=md5_ff(i,s,n,r,e[o+6],17,-1473231341),r=md5_ff(r,i,s,n,e[o+7],22,-45705983),n=md5_ff(n,r,i,s,e[o+8],7,1770035416),s=md5_ff(s,n,r,i,e[o+9],12,-1958414417),i=md5_ff(i,s,n,r,e[o+10],17,-42063),r=md5_ff(r,i,s,n,e[o+11],22,-1990404162),n=md5_ff(n,r,i,s,e[o+12],7,1804603682),s=md5_ff(s,n,r,i,e[o+13],12,-40341101),i=md5_ff(i,s,n,r,e[o+14],17,-1502002290),r=md5_ff(r,i,s,n,e[o+15],22,1236535329),n=md5_gg(n,r,i,s,e[o+1],5,-165796510),s=md5_gg(s,n,r,i,e[o+6],9,-1069501632),i=md5_gg(i,s,n,r,e[o+11],14,643717713),r=md5_gg(r,i,s,n,e[o+0],20,-373897302),n=md5_gg(n,r,i,s,e[o+5],5,-701558691),s=md5_gg(s,n,r,i,e[o+10],9,38016083),i=md5_gg(i,s,n,r,e[o+15],14,-660478335),r=md5_gg(r,i,s,n,e[o+4],20,-405537848),n=md5_gg(n,r,i,s,e[o+9],5,568446438),s=md5_gg(s,n,r,i,e[o+14],9,-1019803690),i=md5_gg(i,s,n,r,e[o+3],14,-187363961),r=md5_gg(r,i,s,n,e[o+8],20,1163531501),n=md5_gg(n,r,i,s,e[o+13],5,-1444681467),s=md5_gg(s,n,r,i,e[o+2],9,-51403784),i=md5_gg(i,s,n,r,e[o+7],14,1735328473),r=md5_gg(r,i,s,n,e[o+12],20,-1926607734),n=md5_hh(n,r,i,s,e[o+5],4,-378558),s=md5_hh(s,n,r,i,e[o+8],11,-2022574463),i=md5_hh(i,s,n,r,e[o+11],16,1839030562),r=md5_hh(r,i,s,n,e[o+14],23,-35309556),n=md5_hh(n,r,i,s,e[o+1],4,-1530992060),s=md5_hh(s,n,r,i,e[o+4],11,1272893353),i=md5_hh(i,s,n,r,e[o+7],16,-155497632),r=md5_hh(r,i,s,n,e[o+10],23,-1094730640),n=md5_hh(n,r,i,s,e[o+13],4,681279174),s=md5_hh(s,n,r,i,e[o+0],11,-358537222),i=md5_hh(i,s,n,r,e[o+3],16,-722521979),r=md5_hh(r,i,s,n,e[o+6],23,76029189),n=md5_hh(n,r,i,s,e[o+9],4,-640364487),s=md5_hh(s,n,r,i,e[o+12],11,-421815835),i=md5_hh(i,s,n,r,e[o+15],16,530742520),r=md5_hh(r,i,s,n,e[o+2],23,-995338651),n=md5_ii(n,r,i,s,e[o+0],6,-198630844),s=md5_ii(s,n,r,i,e[o+7],10,1126891415),i=md5_ii(i,s,n,r,e[o+14],15,-1416354905),r=md5_ii(r,i,s,n,e[o+5],21,-57434055),n=md5_ii(n,r,i,s,e[o+12],6,1700485571),s=md5_ii(s,n,r,i,e[o+3],10,-1894986606),i=md5_ii(i,s,n,r,e[o+10],15,-1051523),r=md5_ii(r,i,s,n,e[o+1],21,-2054922799),n=md5_ii(n,r,i,s,e[o+8],6,1873313359),s=md5_ii(s,n,r,i,e[o+15],10,-30611744),i=md5_ii(i,s,n,r,e[o+6],15,-1560198380),r=md5_ii(r,i,s,n,e[o+13],21,1309151649),n=md5_ii(n,r,i,s,e[o+4],6,-145523070),s=md5_ii(s,n,r,i,e[o+11],10,-1120210379),i=md5_ii(i,s,n,r,e[o+2],15,718787259),r=md5_ii(r,i,s,n,e[o+9],21,-343485551),n=safe_add(n,u),r=safe_add(r,a),i=safe_add(i,f),s=safe_add(s,l)}return Array(n,r,i,s)}function md5_cmn(e,t,n,r,i,s){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(r,s)),i),n)}function md5_ff(e,t,n,r,i,s,o){return md5_cmn(t&n|~t&r,e,t,i,s,o)}function md5_gg(e,t,n,r,i,s,o){return md5_cmn(t&r|n&~r,e,t,i,s,o)}function md5_hh(e,t,n,r,i,s,o){return md5_cmn(t^n^r,e,t,i,s,o)}function md5_ii(e,t,n,r,i,s,o){return md5_cmn(n^(t|~r),e,t,i,s,o)}function core_hmac_md5(e,t){var n=str2binl(e);n.length>16&&(n=core_md5(n,e.length*chrsz));var r=Array(16),i=Array(16);for(var s=0;s<16;s++)r[s]=n[s]^909522486,i[s]=n[s]^1549556828;var o=core_md5(r.concat(str2binl(t)),512+t.length*chrsz);return core_md5(i.concat(o),640)}function safe_add(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function bit_rol(e,t){return e<<t|e>>>32-t}function str2binl(e){var t=Array(),n=(1<<chrsz)-1;for(var r=0;r<e.length*chrsz;r+=chrsz)t[r>>5]|=(e.charCodeAt(r/chrsz)&n)<<r%32;return t}function binl2str(e){var t="",n=(1<<chrsz)-1;for(var r=0;r<e.length*32;r+=chrsz)t+=String.fromCharCode(e[r>>5]>>>r%32&n);return t}function binl2hex(e){var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="";for(var r=0;r<e.length*4;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}function binl2b64(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="";for(var r=0;r<e.length*4;r+=3){var i=(e[r>>2]>>8*(r%4)&255)<<16|(e[r+1>>2]>>8*((r+1)%4)&255)<<8|e[r+2>>2]>>8*((r+2)%4)&255;for(var s=0;s<4;s++)r*8+s*6>e.length*32?n+=b64pad:n+=t.charAt(i>>6*(3-s)&63)}return n}var hexcase=0,b64pad="",chrsz=8;(function(e,t){if(typeof e.QHPASS_MONITOR!="undefined")return;var n="v1.2.7 (2013.04.27)",r="360.cn",i=function(e,s){var o;(function(){o=!0;try{var e=location.protocol.toLowerCase();if(e=="http:"||e=="https:")o=!1}catch(t){}})();var u=t,a=navigator,f=e.screen,l=o?"":t.domain.toLowerCase(),c=a.userAgent.toLowerCase(),h={trim:function(e){return e.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")}},p={on:function(e,t,n){e.addEventListener?e&&e.addEventListener(t,n,!1):e&&e.attachEvent("on"+t,n)},parentNode:function(e,t,n){n=n||5,t=t.toUpperCase();while(e&&n-->0){if(e.tagName===t)return e;e=e.parentNode}return null}},d={fix:function(e){if(!("target"in e)){var t=e.srcElement||e.target;t&&t.nodeType==3&&(t=t.parentNode),e.target=t}return e}},v=function(){function e(e){return e!=null&&e.constructor!=null?Object.prototype.toString.call(e).slice(8,-1):""}return{isArray:function(t){return e(t)=="Array"},isObject:function(e){return e!==null&&typeof e=="object"},mix:function(e,t,n){for(var r in t)if(n||!(e[r]||r in e))e[r]=t[r];return e},encodeURIJson:function(e){var t=[];for(var n in e){if(e[n]==null)continue;t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}return t.join("&")}}}(),m={get:function(e){try{var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=u.cookie.match(n))?unescape(t[2]):""}catch(r){return""}},set:function(e,t,n){n=n||{};var r=n.expires;typeof r=="number"&&(r=new Date,r.setTime(r.getTime()+n.expires));try{u.cookie=e+"="+escape(t)+(r?";expires="+r.toGMTString():"")+(n.path?";path="+n.path:"")+(n.domain?"; domain="+n.domain:"")}catch(i){}}},g={getProject:function(){return""},getReferrer:function(){return u.referrer},getBrowser:function(){var t={"360se-ua":"360se",TT:"tencenttraveler",Maxthon:"maxthon",GreenBrowser:"greenbrowser",Sogou:"se 1.x / se 2.x",TheWorld:"theworld"};for(var n in t)if(c.indexOf(t[n])>-1)return n;var r=!1;try{+external.twGetVersion(external.twGetSecurityID(e)).replace(/\./g,"")>1013&&(r=!0)}catch(i){}if(r)return"360se-noua";var s=c.match(/(msie|chrome|safari|firefox|opera)/);return s=s?s[0]:"",s=="msie"&&(s=c.match(/msie[^;]+/)),s},getLocation:function(){var e="";try{e=location.href}catch(t){e=u.createElement("a"),e.href="",e=e.href}return e=e.replace(/[?#].*$/,""),e=/\.(s?htm|php)/.test(e)?e:e.replace(/\/$/,"")+"/",e},getGuid:function(){function t(e){var t=0,n=0,r=e.length-1;for(r;r>=0;r--){var i=parseInt(e.charCodeAt(r),10);t=(t<<6&268435455)+i+(i<<14),(n=t&266338304)!=0&&(t^=n>>21)}return t}function n(){var n=[a.appName,a.version,a.language||a.browserLanguage,a.platform,a.userAgent,f.width,"x",f.height,f.colorDepth,u.referrer].join(""),r=n.length,i=e.history.length;while(i)n+=i--^r++;return(Math.round(Math.random()*2147483647)^t(n))*2147483647}var i="__guid",s=m.get(i);if(!s){s=[t(o?"":u.domain),n(),+(new Date)+Math.random()+Math.random()].join(".");var c={expires:2592e7,path:"/"};if(r){var h="."+r;if(l.indexOf(h)>0&&l.lastIndexOf(h)==l.length-h.length||l==h)c.domain=h}m.set(i,s,c)}return function(){return s}}(),getCount:function(){var e="count",t=m.get(e);return t=(parseInt(t)||0)+1,m.set(e,t,{expires:864e5,path:"/"}),function(){return t}}(),getFlashVer:function(){var t=-1;if(a.plugins&&a.mimeTypes.length){var n=a.plugins["Shockwave Flash"];n&&n.description&&(t=n.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0")}else if(e.ActiveXObject&&!e.opera)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(r){var i=r.GetVariable("$version");t=i.replace(/WIN/g,"").replace(/,/g,".")}}catch(s){}return t=parseInt(t,10),t},getContainerId:function(e){var t=b.areaIds;if(t){var n,r=new RegExp("^("+t.join("|")+")$","ig");while(e){if(e.id&&r.test(e.id))return(e.getAttribute("data-desc")||e.id).substr(0,100);e=e.parentNode}}return""},getText:function(e){var t="";return e.tagName.toLowerCase()=="input"?t=e.getAttribute("text")||e.getAttribute("data-text")||e.value||e.title||"":t=e.getAttribute("text")||e.getAttribute("data-text")||e.innerText||e.textContent||e.title||"",h.trim(t).substr(0,100)},getHref:function(e){try{return e.getAttribute("data-href")||e.href||""}catch(t){return""}}},y={getBase:function(){return{p:g.getProject(),u:g.getLocation(),id:g.getGuid(),guid:g.getGuid()}},getTrack:function(){return{b:g.getBrowser(),c:g.getCount(),r:g.getReferrer(),fl:g.getFlashVer()}},getClick:function(e){e=d.fix(e||event);var t=e.target,n=t.tagName,r=g.getContainerId(t);if(!t.type||t.type!="submit"&&t.type!="button"){if(n=="AREA")return{f:g.getHref(t),c:"area:"+t.parentNode.name,cId:r};var f,l;return n=="IMG"&&(f=t),t=p.parentNode(t,"A"),t?(l=g.getText(t),{f:g.getHref(t),c:l?l:f?f.src.match(/[^\/]+$/):"",cId:r}):!1}var i=p.parentNode(t,"FORM"),s={};if(i){var o=i.id||"",u=t.id;s={f:i.action,c:"form:"+(i.name||o),cId:r};if((o=="search-form"||o=="searchForm")&&(u=="searchBtn"||u=="search-btn")){var a=w("kw")||w("search-kw")||w("kw1");s.w=a?a.value:""}}else s={f:g.getHref(t),c:g.getText(t),cId:r};return s},getKeydown:function(e){e=d.fix(e||event);if(e.keyCode!=13)return!1;var t=e.target,n=t.tagName,r=g.getContainerId(t);if(n=="INPUT"){var i=p.parentNode(t,"FORM");if(i){var s=i.id||"",o=t.id,u={f:i.action,c:"form:"+(i.name||s),cId:r};if(o=="kw"||o=="search-kw"||o=="kw1")u.w=t.value;return u}}return!1}},b={trackUrl:null,clickUrl:null,areaIds:null},w=function(e){return t.getElementById(e)};return{version:n,util:g,data:y,config:b,sendLog:function(){return e.__qihoo_monitor_imgs={},function(t){var n="log_"+ +(new Date),r=e.__qihoo_monitor_imgs[n]=new Image;r.onload=r.onerror=function(){e.__qihoo_monitor_imgs&&e.__qihoo_monitor_imgs[n]&&(e.__qihoo_monitor_imgs[n]=null,delete e.__qihoo_monitor_imgs[n])},r.src=t}}(),buildLog:function(){var e="";return function(t,n){if(t===!1)return;t=t||{};var r=y.getBase();t=v.mix(r,t,!0);var i=n+v.encodeURIJson(t);if(i==e)return;e=i,setTimeout(function(){e=""},500);var s=v.encodeURIJson(t);s+="&t="+ +(new Date),n=n.indexOf("?")>-1?n+"&"+s:n+"?"+s,this.sendLog(n)}}(),log:function(e,t){t=t||"click";var n=b[t+"Url"];n||alert("Error : the "+t+"url does not exist!"),this.buildLog(e,n)},setConf:function(e,t){var n={};return v.isObject(e)?n=e:n[e]=t,this.config=v.mix(this.config,n,!0),this},setUrl:function(e){return e&&(this.util.getLocation=function(){return e}),this},setProject:function(e){return e&&(this.util.getProject=function(){return e}),this},setId:function(){var e=[],t=0,n;while(n=arguments[t++])v.isArray(n)?e=e.concat(n):e.push(n);return this.setConf("areaIds",e),this},getTrack:function(){var e=this.data.getTrack();return this.log(e,"track"),this},getClickAndKeydown:function(){var e=this;return p.on(u,"mousedown",function(t){var n=e.data.getClick(t);e.log(n,"click")}),p.on(u,"keydown",function(t){var n=e.data.getKeydown(t);e.log(n,"click")}),i.getClickAndKeydown=function(){return e},this}}}(e);i.setConf({trackUrl:"http://s.360.cn/w360/s.htm",clickUrl:"http://s.360.cn/w360/c.htm",wpoUrl:"http://s.360.cn/w360/p.htm"}),e.QHPASS_MONITOR=i})(window,document);